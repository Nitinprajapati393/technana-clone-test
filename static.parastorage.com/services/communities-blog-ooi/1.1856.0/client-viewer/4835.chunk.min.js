"use strict";(("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi=("undefined"!=typeof self?self:this).webpackJsonp__wix_communities_blog_ooi||[]).push([[4835],{45440:(e,t,i)=>{i.d(t,{$:()=>r});var o=i(93523);function r(e){var t=(0,o.YO)(e),i="(galleryEle) => {\n        const computedStyle = window.getComputedStyle(galleryEle);\n        const computedStyles = {};\n        // search css variables to query\n        const cssVariables = [];\n        const stylesheets = document.styleSheets;\n        for (let i = 0; i < stylesheets.length; i++) {\n            try {\n                const rules = stylesheets[i].rules || stylesheets[i].cssRules;\n                for (let j = 0; j < rules.length; j++) {\n                    const rule = rules[j];\n                    const style = rule.style;\n                    if (style) {\n                        for (let k = 0; k < style.length; k++) {\n                            const prop = style[k];\n                            if (prop.startsWith('--')) {\n                                if (prop.includes('ProGallery-')) {\n                                    cssVariables.push(prop);\n                                }\n                            }\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n        }\n        const cssVariablesMap = cssVariables.map((item) => {\n            return {\n                name: item,\n                value: computedStyle.getPropertyValue(item),\n            }\n        }).filter((item) => item.value);\n        // get computed styles\n        for (let i = 0; i < cssVariablesMap.length; i++) {\n            computedStyles[cssVariablesMap[i].name] = cssVariablesMap[i].value;\n        }\n        const options = Object.entries(computedStyles).reduce((res, [key, value]) => {\n            const keyNameStart = key.indexOf('ProGallery-') + 'ProGallery-'.length;\n            const keyName = key.substring(keyNameStart);\n            res[keyName] = JSON.parse(value);\n            return res;\n        }, {});\n        const optionsStr = Object.entries({...".concat(JSON.stringify(t),",...options})\n        .map(([key, value]) => ([key, JSON.stringify(value)]))\n        .filter(([key, value]) => key.includes('layoutParams_'))\n        .map((keyval) => keyval.join(\":\")).join('|');\n        return optionsStr;\n    }");return"(ele) => {\n        const mainFunc = ".concat(i,";\n        return mainFunc(ele);\n    }")}},73459:(e,t,i)=>{i.d(t,{v:()=>o.v});var o=i(71581)},71581:(e,t,i)=>{i.d(t,{v:()=>l});var o=i(60751),r=i.n(o),s=i(62688),a=i.n(s),n=i(33006),l=function(e){var t;try{var i="undefined"!=typeof window?((null===(t=window.document.getElementById("layout-fixer-style-"+e.id))||void 0===t?void 0:t.href)||"").replace(/^.*\/\/[^/]+/,""):"";return r().createElement("div",{id:"layout-fixer-"+e.id+e.isPrerenderMode,key:"layout-fixer-"+e.id+e.isPrerenderMode,style:{display:"none"}},e.isPrerenderMode&&r().createElement("link",{href:i,rel:"stylesheet",id:"layout-fixer-style-"+e.id}),r().createElement("script",{dangerouslySetInnerHTML:{__html:"try {\n            window.requestAnimationFrame(function() {\n              setTimeout(() => {\n                ".concat((0,n.I)(e),"\n              }, 0);\n            });\n        } catch (e) {\n          console.warn('Cannot set layoutFixer css', e);\n        }")}}))}catch(e){return r().createElement("div",{id:"layoutFixerErrors",style:{display:"none"}},e.toString())}};l.defaultProps={measureContainerId:""},l.propTypes={isPrerenderMode:a().bool,id:a().string,items:a().array,options:a().object,useNativeLayoutFixer:a().bool,containerPostProcess:a().shape({width:a().shape({percentage:a().number,addition:a().number}),height:a().shape({percentage:a().number,addition:a().number}),ios:a().shape({width:a().shape({percentage:a().number,addition:a().number}),height:a().shape({percentage:a().number,addition:a().number})})}),measureContainerId:a().string}},33006:(e,t,i)=>{i.d(t,{I:()=>a});var o=i(45440),r=i(52326),s=i(81326);function a(e){var t,i,a,n,l,h,c,u,d,m,p,g,y,v,A,b,f,I,P,S,w,E,C,T,O,x,L,R,M,_,H,D,N,k,G,z,B=e.useNativeLayoutFixer,W=function(e){var t=e.items,i=e.rawOptions,a=void 0===i?e.options:i,n=e.useNativeLayoutFixer,l=e.customCreateGetOptionsFunc,h=t.slice(0,20).map((function(e){return"".concat((0,s.r)(e.mediaUrl),"_").concat(e.width||e.metaData.width,"_").concat(e.height||e.metaData.height)})).join("|");if(n){var c="function"==typeof l?l(a):(0,o.$)(a);return{hrefStr:"/_serverless/pro-gallery-native-layout-fixer/layoutCssNative?id=".concat(e.id,"&items=").concat(h,"&container="),getOptions:c}}var u=Object.entries((0,s.f)(a,r.s)).map((function(e){return e.join(":")})).join("|");return{hrefStr:"/_serverless/pro-gallery-css-v4-server/layoutCss?ver=2&id=".concat(e.id,"&items=").concat(h,"&container="),getOptions:"() => ".concat(JSON.stringify(u))}}(e),j=W.hrefStr,F=W.getOptions,V=e.measureContainerId||"pro-gallery-"+e.id,U=function(t){return"\n  ".concat(t,"\n  var isVertical = options.includes('layoutParams_structure_scrollDirection:\"VERTICAL\"');\n  var layoutFixerUrl =  '").concat(j,"' + pgMeasures.top + '_' + pgMeasures.width + '_' + pgMeasures.height + '_' + window.innerHeight + '&options=' + options;\n  document.getElementById('").concat("layout-fixer-style-"+e.id,"').setAttribute('href', encodeURI(layoutFixerUrl));\n  ")};return U(B?'\n      var ele = document.getElementById("'.concat(e.id,'"), nativeRect = ele.getBoundingClientRect();\n      var pgMeasures = {top: nativeRect.top, width: nativeRect.width, height: Number(getComputedStyle(ele).getPropertyValue("height").replace("px", ""))};\n      var options = (').concat(F,")(ele);\n    "):"\n      var ele = document.getElementById('".concat(V,"');\n      var pgMeasures = ele.getBoundingClientRect();\n      var options = (").concat(F,")(ele);\n      var width = pgMeasures.width;\n      var height = pgMeasures.height;\n\n      var isIOS = /iPad|iPhone|iPod/.test(navigator?.userAgent);\n      if(isIOS) {\n        width = ").concat((null===(a=null===(i=null===(t=null==e?void 0:e.containerPostProcess)||void 0===t?void 0:t.ios)||void 0===i?void 0:i.width)||void 0===a?void 0:a.percentage)?"width * ".concat(null===(l=null===(n=null==e?void 0:e.containerPostProcess)||void 0===n?void 0:n.ios)||void 0===l?void 0:l.width.percentage):"width",";\n        width = ").concat((null===(u=null===(c=null===(h=null==e?void 0:e.containerPostProcess)||void 0===h?void 0:h.ios)||void 0===c?void 0:c.width)||void 0===u?void 0:u.addition)?"width + (".concat(null===(m=null===(d=null==e?void 0:e.containerPostProcess)||void 0===d?void 0:d.ios)||void 0===m?void 0:m.width.addition,")"):"width",";\n        height = ").concat((null===(y=null===(g=null===(p=null==e?void 0:e.containerPostProcess)||void 0===p?void 0:p.ios)||void 0===g?void 0:g.height)||void 0===y?void 0:y.percentage)?"height * ".concat(null===(b=null===(A=null===(v=null==e?void 0:e.containerPostProcess)||void 0===v?void 0:v.ios)||void 0===A?void 0:A.height)||void 0===b?void 0:b.percentage):"height",";\n        height = ").concat((null===(P=null===(I=null===(f=null==e?void 0:e.containerPostProcess)||void 0===f?void 0:f.ios)||void 0===I?void 0:I.height)||void 0===P?void 0:P.addition)?"height + (".concat(null===(E=null===(w=null===(S=null==e?void 0:e.containerPostProcess)||void 0===S?void 0:S.ios)||void 0===w?void 0:w.height)||void 0===E?void 0:E.addition,")"):"height",";\n      } else {\n        width = ").concat((null===(T=null===(C=null==e?void 0:e.containerPostProcess)||void 0===C?void 0:C.width)||void 0===T?void 0:T.percentage)?"width * ".concat(null===(O=e.containerPostProcess)||void 0===O?void 0:O.width.percentage):"width",";\n        width = ").concat((null===(L=null===(x=null==e?void 0:e.containerPostProcess)||void 0===x?void 0:x.width)||void 0===L?void 0:L.addition)?"width + (".concat(null===(R=e.containerPostProcess)||void 0===R?void 0:R.width.addition,")"):"width",";\n        height = ").concat((null===(_=null===(M=null==e?void 0:e.containerPostProcess)||void 0===M?void 0:M.height)||void 0===_?void 0:_.percentage)?"height * ".concat(null===(D=null===(H=null==e?void 0:e.containerPostProcess)||void 0===H?void 0:H.height)||void 0===D?void 0:D.percentage):"height",";\n        height = ").concat((null===(k=null===(N=null==e?void 0:e.containerPostProcess)||void 0===N?void 0:N.height)||void 0===k?void 0:k.addition)?"height + (".concat(null===(z=null===(G=null==e?void 0:e.containerPostProcess)||void 0===G?void 0:G.height)||void 0===z?void 0:z.addition,")"):"height",";\n      }\n\n      pgMeasures = { top: pgMeasures.top, width, height };\n"))}},81326:(e,t,i)=>{i.d(t,{f:()=>o,r:()=>r});var o=function(e,t){return Object.keys(e).filter((function(e){return t.indexOf(e)>=0})).reduce((function(t,i){return t[i]=e[i],t}),{})},r=function(e){void 0===e&&(e="");for(var t=0,i=0;i<e.length;i++)t+=e.charCodeAt(i);return t}},52326:(e,t,i)=>{i.d(t,{s:()=>o});var o=["isRTL","cubeType","cubeImages","arrowsSize","arrowsPosition","cubeRatio","cropRatio","layoutParams_cropRatio","collageAmount","collageDensity","columnsWidth","cropOnlyFill","chooseBestGroup","externalInfoHeight","externalInfoWidth","fixedColumns","groupsPerStrip","galleryMargin","layoutParams_gallerySpacing","groupTypes","groupSize","isVertical","imageMargin","minItemSize","scrollDirection","placeGroupsLtr","rotatingGroupTypes","layoutParams_repeatingGroupTypes","rotatingCropRatios","smartCrop","scatter","smartCrop","targetItemSize","hasThumbnails","thumbnailSize","thumbnailSpacings","galleryThumbnailsAlignment","isSlideshow","galleryLayout","slideshowInfoSize","layoutParams_structure_galleryRatio_value","gallerySizeType","gallerySizePx","gallerySize","enableInfiniteScroll","imageInfoType","textsHorizontalPadding","gridStyle","numberOfImagesPerRow","calculateTextBoxHeightMode","textBoxHeight","textsVerticalPadding","titlePlacement","textBoxWidthPercent","calculateTextBoxWidthMode","useMaxDimensions"]},30539:(e,t,i)=>{i.d(t,{Ou:()=>p});var o=i(75797),r=i(33170);const s=[["galleryLayout",r.A.layoutParams.structure.galleryLayout],["imageMargin",r.A.layoutParams.structure.itemSpacing],["groupsPerStrip",r.A.layoutParams.groups.numberOfGroupsPerRow],["cubeImages",r.A.layoutParams.crop.enable],["smartCrop",r.A.layoutParams.crop.enableSmartCrop],["cropOnlyFill",r.A.layoutParams.crop.cropOnlyFill],["minItemSize",r.A.layoutParams.targetItemSize.minimum],["scatter",r.A.layoutParams.structure.scatter.randomScatter],["rotatingScatter",r.A.layoutParams.structure.scatter.manualScatter],["numberOfImagesPerCol",r.A.layoutParams.structure.numberOfGridRows],["collageDensity",r.A.layoutParams.groups.density],["chooseBestGroup",r.A.layoutParams.groups.groupByOrientation],["groupSize",r.A.layoutParams.groups.groupSize],["hasThumbnails",r.A.layoutParams.thumbnails.enable],["thumbnailSpacings",r.A.layoutParams.thumbnails.spacing],["thumbnailSize",r.A.layoutParams.thumbnails.size],["showArrows",r.A.layoutParams.navigationArrows.enable],["arrowsPadding",r.A.layoutParams.navigationArrows.padding],["arrowsVerticalPosition",r.A.layoutParams.navigationArrows.verticalAlignment],["arrowsSize",r.A.layoutParams.navigationArrows.size],["imageInfoType",r.A.layoutParams.info.layout],["textImageSpace",r.A.layoutParams.info.spacing],["textBoxBorderWidth",r.A.layoutParams.info.border.width],["textBoxBorderColor",r.A.layoutParams.info.border.color],["textBoxBorderRadius",r.A.layoutParams.info.border.radius]],a=[["useMaxDimensions",r.A.layoutParams.structure.enableStreching]],n=[["magnificationLevel",r.A.behaviourParams.item.content.magnificationValue],["tiltAngleValue",r.A.behaviourParams.item.content.tiltAngleValue],["videoLoop",r.A.behaviourParams.item.video.loop],["showVideoPlayButton",r.A.behaviourParams.item.video.enablePlayButton],["showVideoControls",r.A.behaviourParams.item.video.enableControls],["enableVideoPlaceholder",r.A.behaviourParams.item.video.enablePlaceholder],["overlayAnimation",r.A.behaviourParams.item.overlay.hoverAnimation],["overlayPosition",r.A.behaviourParams.item.overlay.position],["overlaySize",r.A.behaviourParams.item.overlay.size],["overlaySizeType",r.A.behaviourParams.item.overlay.sizeUnits],["overlayPadding",r.A.behaviourParams.item.overlay.padding],["overlayBackground",r.A.behaviourParams.item.overlay.backgroundColor],["imageHoverAnimation",r.A.behaviourParams.item.content.hoverAnimation],["imagePlacementAnimation",r.A.behaviourParams.item.content.placementAnimation],["imageLoadingMode",r.A.behaviourParams.item.content.loader],["scrollSnap",r.A.behaviourParams.gallery.horizontal.enableScrollSnap],["scrollAnimation",r.A.behaviourParams.gallery.scrollAnimation],["shouldIndexDirectShareLinkInSEO",r.A.behaviourParams.gallery.enableIndexingShareLinks],["loadMoreButtonText",r.A.behaviourParams.gallery.vertical.loadMore.text],["slideAnimation",r.A.behaviourParams.gallery.horizontal.slideAnimation],["slideTransition",r.A.behaviourParams.gallery.horizontal.slideTransition],["scrollDuration",r.A.behaviourParams.gallery.horizontal.navigationDuration],["slideshowLoop",r.A.behaviourParams.gallery.horizontal.loop],["autoSlideshowInterval",r.A.behaviourParams.gallery.horizontal.autoSlide.interval],["pauseAutoSlideshowOnHover",r.A.behaviourParams.gallery.horizontal.autoSlide.pauseOnHover],["autoSlideshowContinuousSpeed",r.A.behaviourParams.gallery.horizontal.autoSlide.speed],["allowSlideshowCounter",r.A.behaviourParams.gallery.horizontal.slideshowInfo.enableCounter],["playButtonForAutoSlideShow",r.A.behaviourParams.gallery.horizontal.slideshowInfo.enablePlayButton]],l=[["enableInfiniteScroll",r.A.behaviourParams.gallery.vertical.loadMore.enable],["allowContextMenu",r.A.behaviourParams.gallery.blockContextMenu],["enableScroll",r.A.behaviourParams.gallery.horizontal.blockScroll]],h=[["itemShadowBlur",r.A.stylingParams.itemShadowBlur],["itemShadowDirection",r.A.stylingParams.itemShadowDirection],["itemShadowOpacityAndColor",r.A.stylingParams.itemShadowOpacityAndColor],["arrowsColor",r.A.stylingParams.arrowsColor],["itemShadowSize",r.A.stylingParams.itemShadowSize],["itemEnableShadow",r.A.stylingParams.itemEnableShadow],["itemBorderRadius",r.A.stylingParams.itemBorderRadius],["itemBorderColor",r.A.stylingParams.itemBorderColor],["itemBorderWidth",r.A.stylingParams.itemBorderWidth]];function c(e,t){let i=Object.assign({},e);for(const[e,o]of t)i=d(i,e,o);return i}function u(e,t){let i=Object.assign({},e);for(const[e,o]of t)i=m(i,e,o);return i}function d(e,t,i){return void 0===e[i]&&void 0!==e[t]&&(e[i]=e[t]),delete e[t],e}function m(e,t,i){return void 0===e[i]&&void 0!==e[t]&&(e[i]=!e[t]),delete e[t],e}function p(e){let t=Object.assign({},e);return t=c(t,s),t=u(t,a),t=function(e){var t;let i=e;return i=d(i,"galleryThumbnailsAlignment",r.A.layoutParams.thumbnails.alignment),i[r.A.layoutParams.thumbnails.alignment]=null===(t=i[r.A.layoutParams.thumbnails.alignment])||void 0===t?void 0:t.toUpperCase(),i}(t),t=function(e){let t=e;switch(t=d(t,"scrollDirection",r.A.layoutParams.structure.scrollDirection),t[r.A.layoutParams.structure.scrollDirection]){case 0:t[r.A.layoutParams.structure.scrollDirection]="VERTICAL";break;case 1:t[r.A.layoutParams.structure.scrollDirection]="HORIZONTAL"}return t}(t),t=function(e){let t=e;switch(t=d(t,"isVertical",r.A.layoutParams.structure.layoutOrientation),t[r.A.layoutParams.structure.layoutOrientation]){case!0:t[r.A.layoutParams.structure.layoutOrientation]="VERTICAL";break;case!1:t[r.A.layoutParams.structure.layoutOrientation]="HORIZONTAL"}return t}(t),t=function(e){let t=e;switch(t=d(t,"placeGroupsLtr",r.A.layoutParams.structure.groupsOrder),t[r.A.layoutParams.structure.groupsOrder]){case!0:t[r.A.layoutParams.structure.groupsOrder]="LEFT_TO_RIGHT";break;case!1:t[r.A.layoutParams.structure.groupsOrder]="BY_HEIGHT"}return t}(t),t=function(e){if(void 0!==e[r.A.layoutParams.groups.repeatingGroupTypes])return e;let t,i=e,o=i.rotatingGroupTypes||i.layoutParams_repeatingGroupTypes;t="string"==typeof o&&""!==o?o.split(","):"string"==typeof o&&""===o?[]:void 0;return i[r.A.layoutParams.groups.repeatingGroupTypes]=t,delete i.layoutParams_repeatingGroupTypes,delete i.rotatingGroupTypes,i}(t),t=function(e){var t;if(void 0!==e[r.A.layoutParams.groups.allowedGroupTypes])return e;let i=e;return i[r.A.layoutParams.groups.allowedGroupTypes]=(null===(t=i.groupTypes)||void 0===t?void 0:t.split)?i.groupTypes.split(","):i.groupTypes?i.groupTypes:void 0,delete i.groupTypes,i}(t),t=function(e){if(void 0!==e[r.A.layoutParams.structure.numberOfColumns])return e;let t=e;const i=e.numberOfImagesPerRow,o=i>=0?i:void 0;return t[r.A.layoutParams.structure.numberOfColumns]=o,delete t.numberOfImagesPerRow,t}(t),t=function(e){let t=e;switch(t=d(t,"gallerySizeType",r.A.layoutParams.targetItemSize.unit),t[r.A.layoutParams.targetItemSize.unit]){case"px":t[r.A.layoutParams.targetItemSize.unit]="PIXEL";break;case"ratio":t[r.A.layoutParams.targetItemSize.unit]="PERCENT";break;case"smart":t[r.A.layoutParams.targetItemSize.unit]="SMART"}return t}(t),t=function(e){let t,i=e;switch(i[r.A.layoutParams.targetItemSize.unit]){case"PIXEL":t="gallerySizePx";break;case"SMART":t="gallerySize";break;case"PERCENT":t="gallerySizeRatio"}return i=d(i,t,r.A.layoutParams.targetItemSize.value),delete i.gallerySizePx,delete i.gallerySizeRatio,delete i.gallerySize,i}(t),t=function(e){let t=e;if("MIDDLE"===(t=d(t,"cubeFitPosition",r.A.layoutParams.crop.alignment),t[r.A.layoutParams.crop.alignment]))t[r.A.layoutParams.crop.alignment]="CENTER";return t}(t),t=function(e){if(void 0!==e[r.A.layoutParams.crop.ratios])return e;let t,i=e,o=i.rotatingCropRatios,s=i.cubeRatio||i.layoutParams_cropRatio;t="string"==typeof o&&""!==o?o:s;const a=e=>Number(e)>=0?Number(e):e;return i[r.A.layoutParams.crop.ratios]=t&&String(t).split(",").map(a),delete i.cubeRatio,delete i.layoutParams_cropRatio,delete i.rotatingCropRatios,i}(t),t=function(e){let t=e;switch(t=d(t,"calculateTextBoxWidthMode",r.A.layoutParams.info.sizeUnits),t[r.A.layoutParams.info.sizeUnits]){case"PERCENT":t[r.A.layoutParams.info.sizeUnits]="PERCENT",t=d(t,"textBoxWidthPercent",r.A.layoutParams.info.width),delete t.textBoxWidth;break;case"MANUAL":t[r.A.layoutParams.info.sizeUnits]="PIXEL",t=d(t,"textBoxWidth",r.A.layoutParams.info.width),delete t.textBoxWidthPercent}return t}(t),t=function(e){var t,i,o;let s=e;s=d(s,"columnWidths",r.A.layoutParams.structure.columnRatios),0===(null===(t=s[r.A.layoutParams.structure.columnRatios])||void 0===t?void 0:t.length)?s[r.A.layoutParams.structure.columnRatios]=[]:s[r.A.layoutParams.structure.columnRatios]=s[r.A.layoutParams.structure.columnRatios]?(null===(i=s[r.A.layoutParams.structure.columnRatios])||void 0===i?void 0:i.split)?[...((null===(o=s[r.A.layoutParams.structure.columnRatios])||void 0===o?void 0:o.split(","))||[]).map(Number)]:s[r.A.layoutParams.structure.columnRatios]:void 0;return s}(t),t=function(e){var t;let i=e;return i=d(i,"cubeType",r.A.layoutParams.crop.method),i[r.A.layoutParams.crop.method]=null===(t=i[r.A.layoutParams.crop.method])||void 0===t?void 0:t.toUpperCase(),i}(t),t=function(e){let t=e;switch(t=d(t,"gridStyle",r.A.layoutParams.structure.responsiveMode),t[r.A.layoutParams.structure.responsiveMode]){case 0:t[r.A.layoutParams.structure.responsiveMode]="FIT_TO_SCREEN";break;case 1:t[r.A.layoutParams.structure.responsiveMode]="SET_ITEMS_PER_ROW"}return t}(t),t=function(e){if(void 0!==e[r.A.layoutParams.structure.gallerySpacing])return e;let t,i=e;i.layoutParams_gallerySpacing>=0?t=i.layoutParams_gallerySpacing:i.galleryMargin>=0&&(t=i.galleryMargin);return i[r.A.layoutParams.structure.gallerySpacing]=t,delete i.layoutParams_gallerySpacing,delete i.galleryMargin,i}(t),t=function(e){let t=e;t=(0,o.n)("SLIDESHOW")({galleryLayout:e.galleryLayout>=-3?e.galleryLayout:e[r.A.layoutParams.structure.galleryLayout]})?d(t,"slideshowInfoSize",r.A.layoutParams.info.height):d(t,"textBoxHeight",r.A.layoutParams.info.height);return delete t.slideshowInfoSize,delete t.textBoxHeight,t}(t),t=function(e){let t=e;switch(t=d(t,"arrowsPosition",r.A.layoutParams.navigationArrows.position),t[r.A.layoutParams.navigationArrows.position]){case 0:t[r.A.layoutParams.navigationArrows.position]="ON_GALLERY";break;case 1:t[r.A.layoutParams.navigationArrows.position]="OUTSIDE_GALLERY";break;case 2:t[r.A.layoutParams.navigationArrows.position]="MOUSE_CURSOR"}return t}(t),t=c(t,n),t=u(t,l),t=function(e){var t;let i=e;switch(i=d(i,"itemClick",r.A.behaviourParams.item.clickAction),i[r.A.behaviourParams.item.clickAction]=null===(t=i[r.A.behaviourParams.item.clickAction])||void 0===t?void 0:t.toUpperCase(),i[r.A.behaviourParams.item.clickAction]){case"FULLSCREEN":case"EXPAND":i[r.A.behaviourParams.item.clickAction]="ACTION"}return i}(t),t=function(e){var t;let i=e;return i=d(i,"videoPlay",r.A.behaviourParams.item.video.playTrigger),i[r.A.behaviourParams.item.video.playTrigger]=null===(t=i[r.A.behaviourParams.item.video.playTrigger])||void 0===t?void 0:t.toUpperCase(),i}(t),t=function(e){let t=e;t=d(t,"videoSound",r.A.behaviourParams.item.video.volume),void 0!==t[r.A.behaviourParams.item.video.volume]&&(t[r.A.behaviourParams.item.video.volume]=Number(t[r.A.behaviourParams.item.video.volume]));return t}(t),t=function(e){let t=e;return t=d(t,"videoSpeed",r.A.behaviourParams.item.video.speed),t[r.A.behaviourParams.item.video.speed]=Number(t[r.A.behaviourParams.item.video.speed])>=0?Number(t[r.A.behaviourParams.item.video.speed]):void 0,t}(t),t=function(e){let t=e;switch(t=d(t,"hoveringBehaviour",r.A.behaviourParams.item.overlay.hoveringBehaviour),t[r.A.behaviourParams.item.overlay.hoveringBehaviour]){case"NO_CHANGE":t[r.A.behaviourParams.item.overlay.hoveringBehaviour]="ALWAYS_SHOW";break;case"NEVER_SHOW":t[r.A.behaviourParams.item.overlay.hoveringBehaviour]="NEVER_SHOW"}return t}(t),t=function(e){let t=e;switch(t=d(t,"titlePlacement",r.A.layoutParams.info.placement),t[r.A.layoutParams.info.placement]){case"SHOW_ON_HOVER":t[r.A.layoutParams.info.placement]="OVERLAY";break;case"SHOW_BELOW":t[r.A.layoutParams.info.placement]="BELOW";break;case"SHOW_ABOVE":t[r.A.layoutParams.info.placement]="ABOVE";break;case"SHOW_ON_THE_RIGHT":t[r.A.layoutParams.info.placement]="RIGHT";break;case"SHOW_ON_THE_LEFT":t[r.A.layoutParams.info.placement]="LEFT";break;case"ALTERNATE_HORIZONTAL":t[r.A.layoutParams.info.placement]="ALTERNATE_HORIZONTALLY";break;case"ALTERNATE_VERTICAL":t[r.A.layoutParams.info.placement]="ALTERNATE_VERTICALLY"}return t}(t),t=function(e){let t=e;switch(t=d(t,"isRTL",r.A.behaviourParams.gallery.layoutDirection),t[r.A.behaviourParams.gallery.layoutDirection]){case!0:t[r.A.behaviourParams.gallery.layoutDirection]="RIGHT_TO_LEFT";break;case!1:t[r.A.behaviourParams.gallery.layoutDirection]="LEFT_TO_RIGHT"}return t}(t),t=function(e){var t;let i=e;return i=d(i,"loadMoreAmount",r.A.behaviourParams.gallery.vertical.loadMore.amount),i[r.A.behaviourParams.gallery.vertical.loadMore.amount]=null===(t=i[r.A.behaviourParams.gallery.vertical.loadMore.amount])||void 0===t?void 0:t.toUpperCase(),i}(t),t=function(e){if(void 0!==e[r.A.behaviourParams.gallery.horizontal.autoSlide.behaviour])return e;let t,i=e,o=i.isAutoSlideshow,s=i.autoSlideshowType;t=void 0===o?void 0:o?"interval"===s?"INTERVAL":"CONTINUOUS":"OFF";return i[r.A.behaviourParams.gallery.horizontal.autoSlide.behaviour]=t,delete i.isAutoSlideshow,delete i.autoSlideshowType,i}(t),t=function(e){var t;let i=e;return i=d(i,"galleryTextAlign",r.A.behaviourParams.gallery.horizontal.slideshowInfo.buttonsAlignment),i[r.A.behaviourParams.gallery.horizontal.slideshowInfo.buttonsAlignment]=null===(t=i[r.A.behaviourParams.gallery.horizontal.slideshowInfo.buttonsAlignment])||void 0===t?void 0:t.toUpperCase(),i}(t),t=c(t,h),delete t.fullscreen,t}},591:(e,t,i)=>{i.d(t,{A:()=>Ue});var o=i(34629),r=i(60751),s=i.n(r),a=i(37891),n=i(11505),l=i(89049),h=i(56379),c=i(33170),u=i(99728),d=i(94763);class m extends s().Component{render(){if("true"!==n.A.getTopUrlParam("pgdebug"))return!1;const e=s().createElement("div",{className:"version-header "},"Pro Gallery Version #",h.A.staticsVersion);let t="";try{t=" psw"+h.A.top.screen.width+" piw"+h.A.top.innerWidth+" pbw"+h.A.top.document.body.clientWidth}catch(e){}const i=s().createElement("div",{className:"version-header "},n.A.isLandscape()?"land":"port"," sw",h.A.screen.width,"sh",h.A.screen.height," iw",h.A.innerWidth," bw",h.A.document.body.clientWidth," sr","1","rc",this.props.resizeCount," oc",this.props.orientationCount," nh",this.props.newHeight," lh",this.props.lastHeight,t,"www",this.props.maxGalleryWidth);return s().createElement("div",null,e,i)}}const p=m;class g extends s().Component{constructor(e){super(e),this.state={isPrinting:!1}}componentDidMount(){window.addEventListener("beforeprint",(()=>{this.setState({isPrinting:!0})})),window.addEventListener("afterprint",(()=>{this.setState({isPrinting:!1})}))}render(){return this.state.isPrinting?s().createElement("source",Object.assign({},this.props)):null}}class y extends s().Component{constructor(e){super(e),this.imageRef=null}componentDidMount(){var e;(null===(e=this.imageRef)||void 0===e?void 0:e.complete)&&"function"==typeof this.props.onLoad&&this.props.onLoad()}render(){const e=this.props,{customImageRenderer:t}=e,i=(0,o.__rest)(e,["customImageRenderer"]);return"function"==typeof t?t(this.props):"string"==typeof this.props.src?s().createElement("img",Object.assign({ref:e=>{this.imageRef=e},alt:this.props.alt},i)):"object"==typeof this.props.src?s().createElement("picture",{id:`multi_picture_${this.props.id}`,key:`multi_picture_${this.props.id}`},this.props.src.map(((e,t)=>e.forPrinting?s().createElement(g,{key:`print-only-image-${t}`,srcSet:e.dpr,type:`image/${e.type}`}):s().createElement("source",{key:`image-source-${t}`,srcSet:e.dpr||e.url,type:`image/${e.type}`}))),s().createElement("img",Object.assign({ref:e=>{this.imageRef=e},alt:this.props.alt},i,{src:this.props.src[this.props.src.length-1].url}))):null}}const v=y;class A extends s().Component{constructor(e){super(e),this.getImageContainer=this.getImageContainer.bind(this),this.getImageContainerClassNames=this.getImageContainerClassNames.bind(this),this.state={isHighResImageLoaded:!1},this.handleHighResImageLoad=this.handleHighResImageLoad.bind(this)}componentDidMount(){try{"function"==typeof this.props.actions.setItemLoaded&&this.props.actions.setItemLoaded()}catch(e){console.error(e)}}handleHighResImageLoad(){this.setState({isHighResImageLoaded:!0});try{this.props.actions.setItemLoaded()}catch(e){console.error("Failed to load high res image",e)}}getImageContainerClassNames(){const{isCurrentHover:e,options:t}=this.props,{isHighResImageLoaded:i}=this.state;return["gallery-item-content",e?"item-content-hover":"item-content-regular","image-item","gallery-item-visible","gallery-item","gallery-item-preloaded",t[c.A.layoutParams.crop.enable]&&t[c.A.layoutParams.crop.method]===a.A[c.A.layoutParams.crop.method].FIT?"grid-fit":"",t[c.A.behaviourParams.item.content.loader]===a.A[c.A.behaviourParams.item.content.loader].COLOR?"load-with-color "+(i?"image-loaded":""):""].join(" ")}getImageContainer(e,t,i){const{imageDimensions:o,id:r,actions:a}=this.props;return s().createElement("div",{className:t,onTouchStart:a.handleItemMouseDown,onTouchEnd:a.handleItemMouseUp,key:"image_container-"+r,"data-hook":"image-item",style:o},e(),i)}getImageAnimationOverlay(){const{imageDimensions:e,options:t,createUrl:i,id:o}=this.props;let r=null;switch(t[c.A.behaviourParams.gallery.scrollAnimation]){case a.A[c.A.behaviourParams.gallery.scrollAnimation].BLUR:r=i(a.A.urlSizes.RESIZED,a.A.urlTypes.LOW_RES);break;case a.A[c.A.behaviourParams.gallery.scrollAnimation].MAIN_COLOR:r=i(a.A.urlSizes.PIXEL,a.A.urlTypes.HIGH_RES)}return r&&s().createElement("div",{key:"image_container-overlay-"+o,"data-hook":"image-item-overlay",style:Object.assign(Object.assign({},e),{backgroundImage:`url(${r})`,backgroundSize:"cover",pointerEvents:"none",position:"absolute",top:0,left:0})})}getImageElement(){const{alt:e,imageDimensions:t,createUrl:i,id:r,idx:l,settings:h={},options:u}=this.props,{isHighResImageLoaded:d}=this.state,m=h&&h.imageProps&&"function"==typeof h.imageProps?h.imageProps(r):{},{marginLeft:p,marginTop:g}=t,y=(0,o.__rest)(t,["marginLeft","marginTop"]);return()=>{var t,o,h;const p=[],g="string"==typeof e?e:"untitled image",A=n.A.isMobile()&&this.props.options[c.A.behaviourParams.gallery.blockContextMenu]?{WebkitUserSelect:"none",WebkitTouchCallout:"none"}:{},b=this.props.isPrerenderMode?{width:"100%",height:"100%"}:{};if(!d){let e=null;const n=Object.assign({className:"gallery-item-visible gallery-item gallery-item-preloaded",key:"gallery-item-image-img-preload","data-hook":"gallery-item-image-img-preload",loading:"eager"},m);switch(u[c.A.behaviourParams.item.content.loader]){case a.A[c.A.behaviourParams.item.content.loader].BLUR:e=s().createElement(v,Object.assign({alt:g,key:"image_preload_blur-"+r,src:i(a.A.urlSizes.RESIZED,a.A.urlTypes.LOW_RES),style:Object.assign(Object.assign(Object.assign({},y),b),A)},n,{customImageRenderer:null===(t=this.props.customComponents)||void 0===t?void 0:t.customImageRenderer}));break;case a.A[c.A.behaviourParams.item.content.loader].MAIN_COLOR:e=s().createElement(v,Object.assign({alt:g,key:"image_preload_main_color-"+r,src:i(a.A.urlSizes.PIXEL,a.A.urlTypes.HIGH_RES),style:Object.assign(Object.assign(Object.assign({},y),b),A)},n,{customImageRenderer:null===(o=this.props.customComponents)||void 0===o?void 0:o.customImageRenderer}))}p.push(e)}const f=!this.props.isPrerenderMode,I=u[c.A.stylingParams.itemResolutionMode]===a.A[c.A.stylingParams.itemResolutionMode].FULL?a.A.urlSizes.FULL:a.A.urlSizes.MULTI,P=i(I,a.A.urlTypes.HIGH_RES),S=s().createElement(v,Object.assign({key:"image_highres-"+r,className:"gallery-item-visible gallery-item gallery-item-preloaded","data-hook":"gallery-item-image-img","data-idx":l,src:P,alt:g,tabIndex:"0",onLoad:this.handleHighResImageLoad,loading:this.props.isPrerenderMode?"lazy":"eager",style:Object.assign(Object.assign(Object.assign({},y),A),!f&&b)},m,{customImageRenderer:null===(h=this.props.customComponents)||void 0===h?void 0:h.customImageRenderer}));return p.push(S),p}}render(){const e=this.getImageElement(),t=`${this.getImageContainerClassNames()} ${this.props.extraClasses||""}`,i=this.props.overlay||this.getImageAnimationOverlay();return this.getImageContainer(e,t,i)}}const b=A;const f=function(e){return class extends r.Component{constructor(e){super(e),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.isMagnifiedBiggerThanContainer=this.isMagnifiedBiggerThanContainer.bind(this),this.toggleMagnify=this.toggleMagnify.bind(this),this.getMagnifyInitialPos=this.getMagnifyInitialPos.bind(this),this.getBoundrys=this.getBoundrys.bind(this),this.getMagnifiedDimensions=this.getMagnifiedDimensions.bind(this),this.containerRef=null,this.state={shouldMagnify:!1,x:0,y:0}}onDragStart(e){e.preventDefault()}onMouseMove(e){if(this.dragStarted){const{magnifiedWidth:t,magnifiedHeight:i}=this.getMagnifiedDimensions();this.isDragging=!0;const{cubedWidth:o,cubedHeight:r}=this.props.style,{clientY:s,clientX:a}=e,{boundryY:n,boundryX:l}=this.getBoundrys();this.setState({x:Math.max(-l,Math.min(this.dragStartX-a,t-o)),y:Math.max(-n,Math.min(this.dragStartY-s,i-r))})}}onMouseDown(e){const{clientX:t,clientY:i}=e,{x:o,y:r,shouldMagnify:s}=this.state;s?(this.dragStartX=o+t,this.dragStartY=r+i,this.dragStarted=!0):this.setState(this.getMagnifyInitialPos(e))}onMouseUp(){this.isDragging||this.toggleMagnify(),this.dragStarted=!1,this.isDragging=!1}toggleMagnify(e){const{shouldMagnify:t}=this.state;"boolean"==typeof e?this.setState({shouldMagnify:e}):this.setState({shouldMagnify:!t})}getMagnifiedDimensions(){const{style:{innerHeight:e,innerWidth:t}}=this.props,i=this.props.options[c.A.behaviourParams.item.content.magnificationValue];return{magnifiedHeight:e*i,magnifiedWidth:t*i}}getPreloadImage(){var e;const{createUrl:t,id:i,style:o,imageDimensions:r,options:n}=this.props,{innerWidth:l,innerHeight:h}=o,{marginTop:u,marginLeft:d}=r,{shouldMagnify:m,x:p,y:g}=this.state,y=n[c.A.behaviourParams.item.content.magnificationValue],A=t(a.A.urlSizes.RESIZED,a.A.urlTypes.HIGH_RES),b=m?y:1;return s().createElement(v,{alt:"",key:"magnified-item-preload-"+i,className:"magnified-item-preload",src:A,style:{width:l,height:h,position:"relative",zIndex:1,opacity:m?1:0,transform:`scale(${b})`,transformOrigin:`${(p+d)/(y-1)}px ${(g+u)/(y-1)}px`,transition:"transform 0.3s ease"+(m?"":", opacity 0.1s ease 0.3s")},customImageRenderer:null===(e=this.props.customComponents)||void 0===e?void 0:e.customImageRenderer})}getHighResImage(){var e;const{createMagnifiedUrl:t,id:i,alt:o,options:r,isPrerenderMode:a}=this.props,{magnifiedWidth:n,magnifiedHeight:l}=this.getMagnifiedDimensions(),h=t(r[c.A.behaviourParams.item.content.magnificationValue]);return s().createElement(v,{key:`magnified-item-${i}`,className:"magnified-item","data-hook":"magnified-item",src:h,alt:"string"==typeof o?o:"untitled image",id:i,isPrerenderMode:a,style:{width:n,height:l,position:"absolute"},customImageRenderer:null===(e=this.props.customComponents)||void 0===e?void 0:e.customImageRenderer})}isMagnifiedBiggerThanContainer(e){const{magnifiedWidth:t,magnifiedHeight:i}=this.getMagnifiedDimensions(),{cubedWidth:o,cubedHeight:r}=e;return o<t||r<i}getMagnifyInitialPos(e){const{clientX:t,clientY:i}=e,{style:o}=this.props,{magnifiedWidth:r,magnifiedHeight:s}=this.getMagnifiedDimensions(),{cubedWidth:a,cubedHeight:n}=o,{top:l,left:h}=this.containerRef.getBoundingClientRect(),c=(t-h)/a*r-(t-h),u=(i-l)/n*s-(i-l),{boundryY:d,boundryX:m}=this.getBoundrys();return{x:Math.max(-m,Math.min(c,r-a)),y:Math.max(-d,Math.min(u,s-n))}}getBoundrys(){const{style:e}=this.props,{magnifiedWidth:t,magnifiedHeight:i}=this.getMagnifiedDimensions(),{cubedWidth:o,cubedHeight:r}=e;return{boundryY:i<r?r/2-i/2:0,boundryX:t<o?o/2-t/2:0}}getContainerStyle(){const{shouldMagnify:e}=this.state,{style:t}=this.props,{cubedWidth:i,cubedHeight:o}=t;return{width:i,height:o,position:"relative",display:"flex",justifyContent:"center",alignItems:"center",cursor:e?"zoom-out":"zoom-in"}}getMagnifiedImageStyle(){const{shouldMagnify:e,x:t,y:i}=this.state;return{zIndex:2,position:"absolute",top:0,left:0,transform:`translate(${-t}px, ${-i}px)`,opacity:e?1:0,transition:"opacity 0.1s ease",transitionDelay:e?"0.3s":"none"}}render(){const{shouldMagnify:t}=this.state;return this.props.options[c.A.behaviourParams.item.clickAction]!==a.A[c.A.behaviourParams.item.clickAction].MAGNIFY?s().createElement(e,Object.assign({},this.props)):s().createElement("div",{ref:e=>this.containerRef=e,className:"magnified-item-container",style:this.getContainerStyle(),onDragStart:this.onDragStart,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},s().createElement(e,Object.assign({},this.props)),this.getPreloadImage(),s().createElement("div",{className:"magnified-images",style:this.getMagnifiedImageStyle()},t&&this.getHighResImage()))}}},I=f(b);var P=i(88804);const S=({url:e,dimensions:t})=>s().createElement("iframe",{"data-hook":"video-iframe-placeholder",className:"gallery-item-content video-iframe-placeholder",title:"pro-gallery-video",style:Object.assign({},t),allow:"fullscreen",src:e,allowFullScreen:!0,loading:"lazy"}),w=e=>"video"===e?s().createElement(P.v,{type:"videoPlayButton",size:60}):"3d"===e?s().createElement(P.v,{type:"rotateArrow",size:60}):s().createElement(s().Fragment,null);function E(e){const{hasLink:t,options:i,imageDimensions:o,showPlayButton:l,MediaImplementation:h,enableImagePlaceholder:d,isVideoPlaceholder:m,videoPlaceholderUrl:p}=e,{behaviourParams_item_clickAction:g,behaviourParams_item_video_playTrigger:y}=i,v=(0,r.useMemo)((()=>!n.A.isSSR()&&(y===a.A[c.A.behaviourParams.item.video.playTrigger].HOVER||y===a.A[c.A.behaviourParams.item.video.playTrigger].AUTO||(g===a.A[c.A.behaviourParams.item.clickAction].NOTHING||g===a.A[c.A.behaviourParams.item.clickAction].MAGNIFY||g===a.A[c.A.behaviourParams.item.clickAction].LINK&&!t))),[t,y,g]),A=(t={})=>d?s().createElement(b,Object.assign({},e,{imageDimensions:o,id:e.idx,overlay:l&&!v&&w(e.type),extraClasses:e.placeholderExtraClasses.join(" ")},t)):s().createElement(s().Fragment,null),f=A(),I=s().createElement(S,{dimensions:o,url:m?p:e.videoUrl}),P=s().createElement(s().Fragment,null,f,I,e.hover);return!v||e.isPrerenderMode?P:(0,u.Q)()?s().createElement(s().Fragment,null,f,e.hover):s().createElement(s().Suspense,{fallback:P},s().createElement(h,Object.assign({},e,{thumbnail:f,placeholder:P,thumbnailWithOverride:A})))}const C=s().lazy((()=>Promise.all([i.e(7891),i.e(5622),i.e(2114)]).then(i.bind(i,77564))));function T(e){const{options:t}=e,i=t[c.A.behaviourParams.item.threeDimensionalScene.playTrigger],o=t[c.A.behaviourParams.item.threeDimensionalScene.enablePlayButton];return s().createElement(E,Object.assign({},e,{MediaImplementation:C,playTrigger:i,placeholderExtraClasses:["gallery-item-3d-placeholder"],enableImagePlaceholder:!0,showPlayButton:o}))}const O=e=>t=>{const{itemWasHovered:i,isCurrentHover:o,hasSecondaryMedia:r,secondaryMediaItem:n}=t;if(t.options[c.A.behaviourParams.item.secondaryMedia.trigger]===a.A[c.A.behaviourParams.item.secondaryMedia.trigger].OFF||!r)return s().createElement(e,Object.assign({},t));return s().createElement("div",{className:"item-with-secondary-media-container"},s().createElement(e,Object.assign({},t)),s().createElement("div",{className:["secondary-media-item",o?"show":"hide"].join(" ")},i&&s().createElement(e,Object.assign({},(()=>{const{createUrl:e,createMagnifiedUrl:i,style:o,html:r}=n;return Object.assign(Object.assign({},t),{style:o,html:r,createUrl:e,createMagnifiedUrl:i})})()))))};class x extends s().Component{constructor(e){super(e),"function"==typeof this.props.actions.setItemLoaded&&this.props.actions.setItemLoaded()}getTextDimensions(){const{style:e,options:t,cropRatio:i,imageDimensions:o}=this.props,r=e.ratio<i-.01,{marginLeft:s,marginTop:n}=o,l=(r?e.height/e.maxHeight:e.width/e.maxWidth)*e.maxHeight,h=(r?e.height/e.maxHeight:e.width/e.maxWidth)*e.maxWidth,u=t[c.A.layoutParams.crop.method]===a.A[c.A.layoutParams.crop.method].FIT?"0, 0":`${Math.round((e.width-h)/2)}px, ${Math.round((e.height-l)/2)}px`,d=r?e.height/e.maxHeight:e.width/e.maxWidth,m=`translate(${u}) scale(${d})`,p=Math.round(s/d),g=Math.round(n/d);return{width:e.maxWidth+"px",height:e.maxHeight+"px",marginLeft:p,marginTop:g,transformOrigin:`${-p}px ${-g}px`,WebkitTransform:m,MsTransform:m,OTransform:m,transform:m}}processInnerhtml(e){try{return e.replace(/class="font_\d+"/gm,"")}catch(t){return e}}render(){const{id:e,options:t,html:i,style:o,actions:r,imageDimensions:n}=this.props,l=this.processInnerhtml(i),h=this.getTextDimensions(),u={dangerouslySetInnerHTML:{__html:l}},d={style:Object.assign(h,t[c.A.layoutParams.crop.method]===a.A[c.A.layoutParams.crop.method].FIT?{backgroundColor:o.bgColor}:{})},m=Object.assign(Object.assign({},u),d),p={height:n&&!this.props.isPrerenderMode?n.height:"inherit",backgroundColor:t[c.A.layoutParams.crop.method]!==a.A[c.A.layoutParams.crop.method].FIT?o.bgColor:"inherit"};n&&n.borderRadius&&(p.borderRadius=n.borderRadius);const g=["gallery-item-content",this.props.isCurrentHover?"item-content-hover":"item-content-regular"];return s().createElement("div",{className:g.join(" "),style:p},s().createElement("div",Object.assign({className:"gallery-item-visible gallery-item gallery-item-loaded text-item",key:"item-text-"+e,onTouchStart:r.handleItemMouseDown,onTouchEnd:r.handleItemMouseUp,"data-hook":"text-item"},m)))}}class L extends s().Component{getHoverClass(){const{options:e,forceShowHover:t}=this.props,i=["gallery-item-hover"];return i.push("fullscreen-"+(e.fullscreen?"enabled":"disabled")),n.A.isUndefined(e.itemOpacity)&&i.push("default"),t?i.push("force-hover"):n.A.isMobile()&&i.push("hide-hover"),this.props.isCurrentHover?i.push("item-overlay-hover"):i.push("item-overlay-regular"),i.join(" ")}shouldRenderHoverInnerIfExist(){const{itemWasHovered:e,options:t}=this.props,{alwaysShowHover:i,previewHover:o}=t,{APPEARS:r}=a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour],{NO_EFFECT:s}=a.A[c.A.behaviourParams.item.overlay.hoverAnimation];return!!i||(!(!(0,u.Q)()||!o)||(t[c.A.behaviourParams.item.overlay.hoveringBehaviour]!==r||t[c.A.behaviourParams.item.overlay.hoverAnimation]===s||e))}getOverlayStyle(){const{options:e,imageDimensions:t}=this.props,i={},o=e[c.A.behaviourParams.item.overlay.padding],r=e[c.A.behaviourParams.item.overlay.sizeUnits],s=e[c.A.behaviourParams.item.overlay.size],n=e[c.A.behaviourParams.item.overlay.position],{LEFT:l,RIGHT:h,CENTERED_HORIZONTALLY:u}=a.A[c.A.behaviourParams.item.overlay.position],d=n===l||n===h||n===u,{width:m,height:p}=this.calcHeightAndWidth({isHorizontal:d,overlayPadding:o,requiredOverlaySize:s,imageDimensions:t,overlaySizeUnits:r}),g=o;return Object.assign(i,{width:m,height:p,margin:g,position:"relative"}),i}calcHeightAndWidth({isHorizontal:e,overlayPadding:t,requiredOverlaySize:i,imageDimensions:o,overlaySizeUnits:r}){const s=e?"width":"height",a=e?"height":"width",n=this.calcOverlaySize(o[s],i,r,t);return{[s]:n,[a]:o[a]-2*t}}calcOverlaySize(e,t,i,o){const r=e+-2*o,s=Math.min(r,i===a.A[c.A.behaviourParams.item.overlay.sizeUnits].PERCENT?r*(t/100):t);return Math.max(0,s)}getOverlayPositionByFlex(){const{options:e,imageDimensions:t}=this.props,i=e[c.A.behaviourParams.item.overlay.position],{width:o,height:r,marginTop:s,marginLeft:n}=t,l={width:o,height:r,marginTop:s,marginLeft:n,display:"flex",position:"absolute",top:0,left:0},{RIGHT:h,BOTTOM:u,CENTERED_HORIZONTALLY:d,CENTERED_VERTICALLY:m}=a.A[c.A.behaviourParams.item.overlay.position];switch(i){case h:Object.assign(l,{justifyContent:"flex-end"});break;case u:Object.assign(l,{alignItems:"flex-end"});break;case d:Object.assign(l,{justifyContent:"center"});break;case m:Object.assign(l,{alignItems:"center"})}return l}render(){const{actions:e,idx:t,renderCustomInfo:i}=this.props,o=this.getHoverClass(),r=this.getOverlayStyle(),a=this.getOverlayPositionByFlex();return s().createElement("div",{className:"item-hover-flex-container",style:a},s().createElement("div",{key:"item-hover-"+t,"data-hook":"item-hover-"+t,"aria-hidden":!0,className:o,onTouchStart:e.handleItemMouseDown,onTouchEnd:e.handleItemMouseUp,style:r},this.shouldRenderHoverInnerIfExist()&&i?s().createElement("div",{className:"gallery-item-hover-inner"},i()):null))}}var R=i(4440);const M=new class{constructor(){this.pgScrollSteps=[40960,20480,10240,5120,2560,1280,640,320,160,80,40,20,10],this.pgScrollClassName="pgscl",this.screenSize=Math.max(h.A.screen.width,h.A.screen.height),this.scrollCss=[],this.scrollCssProps=[],this.calcScrollPaddings(!1)}calcScrollPaddings(){this.allPagePadding=()=>[1/0,1/0],this.inScreenPadding=()=>[0,0],this.aboveScreenPadding=()=>[0,1/0],this.justBelowScreenPadding=e=>[1/0,-1*(e+this.screenSize)],this.justBelowAndAboveScreenPadding=()=>[2560,1/0],this.justBelowAndInScreenPadding=()=>[5120,0],this.belowScreenPadding=()=>[1/0,0],this.highResPadding=()=>[5120,1/0],this.lowResPadding=()=>[10240,1/0]}getSellectorDomId({id:e,idx:t}){return`pgi${String(e).replace(/[\W]+/g,"")}_${t}`}buildScrollClassName(e,t,i){const o=String(e).replace(/[\W]+/g,"").slice(-8);return`${this.pgScrollClassName}_${o}_${i}-${this.pgScrollSteps[t]+Number(i)}`}calcScrollClasses(e,t){return`${this.pgScrollClassName}-${t} `+this.pgScrollSteps.map(((i,o)=>this.buildScrollClassName(e,o,Math.floor(t/i)*i))).join(" ")}calcScrollCss({id:e,items:t,options:i,container:o}){if(n.A.isVerbose()&&console.time("CSS Scroll"),!t||!t.length)return[];if(i[c.A.behaviourParams.gallery.scrollAnimation]===a.A[c.A.behaviourParams.gallery.scrollAnimation].NO_EFFECT)return[];this.screenSize=i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?Math.min(h.A.outerWidth,h.A.screen.width,o.galleryWidth):Math.min(h.A.outerHeight,h.A.screen.height),i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].VERTICAL&&n.A.isMobile()&&(this.screenSize+=50),this.calcScrollPaddings();const[r]=t.slice(-1),{top:s,right:l}=r.offset,u=this.pgScrollSteps[0];this.minHeight=0-u,this.maxHeight=(Math.ceil(((i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?l:s)+this.screenSize)/u)+1)*u;const d=t.map((t=>this.calcScrollCssForItem({id:e,item:t,options:i})));return n.A.isVerbose()&&console.timeEnd("CSS Scroll"),d}shouldCalcScrollCss({type:e}){return"video"!==e&&"text"!==e&&"3d"!==e}createScrollSelectorsFunction({id:e,item:t,options:i}){const o=i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?t.offset.left-this.screenSize:t.offset.top-this.screenSize,r=i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?t.offset.left+t.width:t.offset.top+t.height,s=this.pgScrollSteps[this.pgScrollSteps.length-1],n=(e,t)=>Math.ceil(Math.min(this.maxHeight,e)/t)*t,l=(e,t)=>Math.floor(Math.max(this.minHeight,e)/t)*t,h=this.getSellectorDomId(t);return(t,i)=>{const[a,c]=t;if(a===1/0&&c===1/0)return`#pro-gallery-${e} #${h} ${i}`;let u=l(o-a,s);const d=n(r+c,s),m=[];for(;u<d;){const o=this.pgScrollSteps.findIndex((e=>u%e==0&&u+e<=d));if(-1===o){console.error("largestDividerIdx is -1. Couldn't find index in pgScrollSteps array.\nfrom =",u,"\nto =",d,"\npadding[0] =",t[0],"\npadding[1] =",t[1]);break}m.push(`.${this.buildScrollClassName(e,o,u)} ~ div #${h} ${i}`),u+=this.pgScrollSteps[o]}return m.join(", ")}}calcScrollCssForItem({id:e,item:t,options:i}){const{idx:o}=t;let r="";const s=this.createScrollSelectorsFunction({id:e,item:t,options:i});return r+=this.createScrollAnimationsIfNeeded({idx:o,item:t,options:i,createScrollSelectors:s}),this.scrollCss[o]=r||this.scrollCss[o],this.scrollCss[o]}createScrollAnimationsIfNeeded({idx:e,options:t,createScrollSelectors:i}){const o=t[c.A.behaviourParams.gallery.scrollAnimation],{NO_EFFECT:r,FADE_IN:s,GRAYSCALE:n,SLIDE_UP:l,EXPAND:h,SHRINK:u,ZOOM_OUT:d,ONE_COLOR:m,MAIN_COLOR:p,BLUR:g}=a.A[c.A.behaviourParams.gallery.scrollAnimation],y=t[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,v=t[c.A.layoutParams.structure.scrollDirection];if(o===r)return"";const A=100*(e%3+1),b=100*(e%3+1),f=this.allPagePadding(),I=this.aboveScreenPadding();let P="";if(o!==p&&o!==g||(P+=i(f,' [data-hook="image-item-overlay"]')+`{filter: opacity(1); transition: filter 1.${b}s ease-in ${A}ms !important;}`,P+=i(I,' [data-hook="image-item-overlay"]')+"{filter: opacity(0) !important;}"),o===s&&(P+=i(f,"")+`{filter: opacity(0); transition: filter 1.${b}s ease-in !important;}`,P+=i(I,"")+"{filter: opacity(1) !important;}"),o===n&&(P+=i(f," .gallery-item-wrapper")+`{filter: grayscale(100%); transition: filter 1.${200+b}s ease-in !important;}`,P+=i(I," .gallery-item-wrapper")+"{filter: grayscale(0) !important;}"),o===l){const e=v===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?"X":"Y",t=y?"-":"";P+=i(f,"")+`{transform: translate${e}(${t}100px); transition: transform 0.8s cubic-bezier(.13,.78,.53,.92) !important;}`,P+=i(I,"")+`{transform: translate${e}(0) !important;}`}if(o===h&&(P+=i(f,"")+`{transform: scale(0.95); transition: transform 1s cubic-bezier(.13,.78,.53,.92) ${A}ms !important;}`,P+=i(I,"")+"{transform: scale(1) !important;}"),o===u&&(P+=i(f,"")+`{transform: scale(1.05); transition: transform 1s cubic-bezier(.13,.78,.53,.92) ${A}ms !important;}`,P+=i(I,"")+"{transform: scale(1) !important;}"),o===d&&(P+=i(f," .gallery-item-wrapper")+`{transform: scale(1.1); transition: transform 1.2s cubic-bezier(.13,.78,.53,.92) ${A}ms !important;}`,P+=i(I," .gallery-item-wrapper")+"{transform: scale(1) !important;}"),o===m){const e=t.oneColorAnimationColor&&t.oneColorAnimationColor.value?t.oneColorAnimationColor.value:"transparent";P+=i(f,"")+`{background-color: ${e};}`,P+=i(f," .gallery-item-wrapper")+`{filter: opacity(0); transition: filter 0.${600+b}s ease-in !important;}`,P+=i(I," .gallery-item-wrapper")+"{filter: opacity(1) !important;}"}return P}};function _(e){return Object.assign({},(e[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].ATTACHED_BACKGROUND||a.A.hasHoverPlacement(e[c.A.layoutParams.info.placement]))&&Object.assign(Object.assign({},D(e[c.A.stylingParams.itemBorderRadius],e[c.A.stylingParams.itemBorderWidth],e[c.A.stylingParams.itemBorderColor])),function(e){let t={};if(e[c.A.stylingParams.itemEnableShadow]){const i=e[c.A.stylingParams.itemShadowBlur],o=e[c.A.stylingParams.itemShadowDirection],r=e[c.A.stylingParams.itemShadowSize],s=-1*(Number(o)-90)/360*2*Math.PI;t={boxShadow:`${Math.round(r*Math.cos(s))}px ${Math.round(-1*r*Math.sin(s))}px ${i}px ${n.A.formatColor(e[c.A.stylingParams.itemShadowOpacityAndColor])}`}}return t}(e)))}function H(e){return Object.assign({},!a.A.hasHoverPlacement(e[c.A.layoutParams.info.placement])&&(e[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].NO_BACKGROUND||e[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].SEPARATED_BACKGROUND)&&Object.assign({},D(e[c.A.stylingParams.itemBorderRadius],e[c.A.stylingParams.itemBorderWidth],e[c.A.stylingParams.itemBorderColor])))}function D(e,t,i){return Object.assign(Object.assign({overflow:"hidden"},e>0&&{borderRadius:e}),t>0&&{borderWidth:t+"px",borderColor:n.A.formatColor(i),borderStyle:"solid"})}function N(e,t,i,o){const r=Object.assign(Object.assign({},a.A.hasExternalHorizontalPlacement(e)&&{height:i,float:a.A.isExternalRightPlacement(e)?"right":"left"}),a.A.hasExternalVerticalPlacement(e)&&{height:o,boxSizing:"content-box"});return t[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].SEPARATED_BACKGROUND?Object.assign(Object.assign(Object.assign(Object.assign({},r),D(t[c.A.layoutParams.info.border.radius],t[c.A.layoutParams.info.border.width],t[c.A.layoutParams.info.border.color])),a.A.hasExternalAbovePlacement(e)&&{marginBottom:t[c.A.layoutParams.info.spacing]}),a.A.hasExternalBelowPlacement(e)&&{marginTop:t[c.A.layoutParams.info.spacing]}):r}function k(e,t,i,o){const r=Object.assign(Object.assign({},(t[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].SEPARATED_BACKGROUND||t[c.A.layoutParams.info.layout]===a.A[c.A.layoutParams.info.layout].ATTACHED_BACKGROUND)&&t.textBoxFillColor&&t.textBoxFillColor.value&&{backgroundColor:t.textBoxFillColor.value}),{overflow:"hidden",boxSizing:"border-box"}),s=a.A.hasExternalVerticalPlacement(e),n=a.A.hasExternalHorizontalPlacement(e);return Object.assign(Object.assign(Object.assign({},r),s&&function(e,t){return{width:"100%",height:t}}(0,i)),n&&function(e,t){return{height:"100%",width:t}}(0,o))}const G=n.A.isiOS(),z=s().lazy((()=>Promise.all([i.e(7891),i.e(5622),i.e(1505),i.e(6748),i.e(9143),i.e(4367)]).then(i.bind(i,96239))));class B extends s().Component{render(){const e=(((t=this.props).videoUrl||t.url).includes("youtube.com")||(t.videoUrl||t.url).includes("youtu.be"))&&G;var t;return s().createElement(z,Object.assign({},this.props,{loadVideo:this.props.shouldPlay||e,videoPlaceholder:this.props.thumbnail,videoPlayButton:this.props.showPlayButton&&s().createElement(P.v,{type:"videoPlayButton",size:60})}))}}class W extends s().Component{render(){const e=this.props.options[c.A.behaviourParams.item.video.enablePlayButton];return s().createElement(E,Object.assign({},this.props,{MediaImplementation:B,enableImagePlaceholder:(0,R.g4)(this.props.options),showPlayButton:e,placeholderExtraClasses:["video-item","gallery-item-video"]}))}}const j=W;function F(e){return Object.assign(Object.assign({},e),{isMobile:n.A.isMobile()})}const V=({idx:e,activeIndex:t,options:i},o=!1)=>{const{[c.A.behaviourParams.gallery.horizontal.slideAnimation]:r}=i,s=i[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT;switch(r){case a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].FADE:return"fade fade-"+(t===e?"visible":"hidden");case a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].DECK:return t<e?"deck-after "+(o?"override":""):t===e?"deck-current "+(o?"override":""):t>e?"deck-before"+(s?"-rtl":""):{};default:return{}}},U=O(I),$=O(x);class K extends s().Component{constructor(e){super(e),this.itemContainer=s().createRef(),this.shouldUseDirectLink=()=>{const{directLink:e}=this.props,{url:t,target:i}=e||{},o=!(!t||!i||this.props.options[c.A.behaviourParams.item.clickAction]!==a.A[c.A.behaviourParams.item.clickAction].LINK);return this.shouldShowHoverOnMobile()&&this.isClickOnCurrentHoveredItem()&&o?(this.props.actions.eventsListener(a.A.events.HOVER_SET,-1),!0):!(!o||this.shouldShowHoverOnMobile())},this.isClickOnCurrentHoveredItem=()=>this.state.isCurrentHover||this.props.options[c.A.behaviourParams.item.overlay.hoveringBehaviour]===a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour].ALWAYS_SHOW,this.props.actions.eventsListener(a.A.events.ITEM_CREATED,this.props),this.init(),this.state={isCurrentHover:!1,itemWasHovered:!1},this.activeElement=""}init(){this.onItemClick=this.onItemClick.bind(this),this.onItemWrapperClick=this.onItemWrapperClick.bind(this),this.onItemInfoClick=this.onItemInfoClick.bind(this),this.onAnchorKeyDown=this.onAnchorKeyDown.bind(this),this.onContainerKeyUp=this.onContainerKeyUp.bind(this),this.handleItemMouseDown=this.handleItemMouseDown.bind(this),this.handleItemMouseUp=this.handleItemMouseUp.bind(this),this.setItemLoaded=this.setItemLoaded.bind(this),this.isHighlight=this.isHighlight.bind(this),this.getItemHover=this.getItemHover.bind(this),this.getImageItem=this.getImageItem.bind(this),this.getVideoItem=this.getVideoItem.bind(this),this.getTextItem=this.getTextItem.bind(this),this.getItemInner=this.getItemInner.bind(this),this.getItemContainerStyles=this.getItemContainerStyles.bind(this),this.getItemWrapperStyles=this.getItemWrapperStyles.bind(this),this.getItemAriaLabel=this.getItemAriaLabel.bind(this),this.getItemContainerClass=this.getItemContainerClass.bind(this),this.getItemWrapperClass=this.getItemWrapperClass.bind(this),this.getItemContainerTabIndex=this.getItemContainerTabIndex.bind(this),this.isIconTag=this.isIconTag.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.checkIfCurrentHoverChanged=this.checkIfCurrentHoverChanged.bind(this),this.shouldHoverWithoutOverlayAndClickOnMobile=this.shouldHoverWithoutOverlayAndClickOnMobile.bind(this)}setItemLoaded(){this.props.actions.eventsListener(a.A.events.ITEM_LOADED,this.props),this.setState({loaded:!0})}isIconTag(e){return["button","i","a","svg","path"].indexOf(e.toLowerCase())>=0}onMouseEnter(){n.A.isMobile()||this.props.actions.eventsListener(a.A.events.HOVER_SET,this.props.idx)}onMouseLeave(){n.A.isMobile()||this.props.actions.eventsListener(a.A.events.HOVER_SET,-1)}onFocus(){var e;(null===(e=this.props.settings)||void 0===e?void 0:e.isAccessible)&&this.props.actions.eventsListener(a.A.events.HOVER_SET,this.props.idx),this.props.actions.eventsListener(a.A.events.ITEM_FOCUSED,this.props)}onBlur(){var e;(null===(e=this.props.settings)||void 0===e?void 0:e.isAccessible)&&this.props.actions.eventsListener(a.A.events.HOVER_SET,-1),this.props.actions.eventsListener(a.A.events.ITEM_LOST_FOCUS,this.props)}onAnchorKeyDown(e){switch(e.keyCode||e.charCode){case 32:case 13:return e.stopPropagation(),this.onItemClick(e,"item-container",!1),!1;default:return!0}}handleGalleryItemAction(e){this.props.actions.eventsListener(a.A.events.ITEM_ACTION_TRIGGERED,this.props,e)}onItemWrapperClick(e){this.onItemClick(e,"item-media")}onItemInfoClick(e){this.onItemClick(e,"item-info",!1),e.stopPropagation()}onItemClick(e,t,i=!0){this.props.actions.eventsListener(a.A.events.ITEM_CLICKED,Object.assign(Object.assign({},this.props),{clickTarget:t}),e),this.shouldUseDirectLink()||(i&&e.preventDefault(),this.shouldShowHoverOnMobile()||this.shouldShowSecondMediaOnMobile()?this.handleHoverClickOnMobile(e):this.shouldHoverWithoutOverlayAndClickOnMobile()?this.props.actions.eventsListener(a.A.events.HOVER_SET,this.props.idx):this.handleGalleryItemAction(e))}handleHoverClickOnMobile(e){this.isClickOnCurrentHoveredItem()?(this.handleGalleryItemAction(e),this.props.actions.eventsListener(a.A.events.HOVER_SET,-1)):this.props.actions.eventsListener(a.A.events.HOVER_SET,this.props.idx)}handleItemMouseDown(){return!0}handleItemMouseUp(){return n.A.isMobile()&&this.longPressTimer&&clearTimeout(this.longPressTimer),!0}shouldShowHoverOnMobile(){if(n.A.isMobile()){const{[c.A.behaviourParams.item.overlay.hoveringBehaviour]:e,alwaysShowHover:t,previewHover:i}=this.props.options;if(e===a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour].NEVER_SHOW)return!1;if(this.props.options[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].NOTHING&&"video"!==this.props.type&&"3d"!==this.props.type)return!0;if(this.props.customComponents.customHoverRenderer&&a.A.hasHoverPlacement(this.props.options[c.A.layoutParams.info.placement])&&e!==a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour].NEVER_SHOW)return!0;if(t)return!0;if((0,u.Q)()&&i)return!0}return!1}shouldShowSecondMediaOnMobile(){return!!n.A.isMobile()&&(this.props.options[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].NOTHING&&"video"!==this.props.type&&"3d"!==this.props.type&&this.props.options[c.A.behaviourParams.item.secondaryMedia.trigger]===a.A[c.A.behaviourParams.item.secondaryMedia.trigger].HOVER)}shouldHoverWithoutOverlayAndClickOnMobile(){return n.A.isMobile()&&this.props.options[c.A.behaviourParams.item.video.playTrigger]===a.A[c.A.behaviourParams.item.video.playTrigger].HOVER&&this.props.options[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].NOTHING}isHighlight(){return this.props.thumbnailHighlightId&&this.props.thumbnailHighlightId===this.props.id}shouldHover(){const{options:e}=this.props,{alwaysShowHover:t,previewHover:i}=e,o=e[c.A.behaviourParams.item.overlay.hoveringBehaviour],{NEVER_SHOW:r,APPEARS:s}=a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour],{NO_EFFECT:l}=a.A[c.A.behaviourParams.item.overlay.hoverAnimation];return o!==r&&(!0===t||(!(!(0,u.Q)()||!i)||!(o===s&&e[c.A.behaviourParams.item.overlay.hoverAnimation]===l&&!this.state.itemWasHovered)&&(!n.A.isMobile()||this.shouldShowHoverOnMobile())))}getItemHover(e){const t=this.props,{customComponents:i}=t,r=(0,o.__rest)(t,["customComponents"]);return this.shouldHover()&&s().createElement(L,Object.assign({},r,{forceShowHover:this.simulateOverlayHover(),isCurrentHover:this.simulateHover(),imageDimensions:e,itemWasHovered:this.state.itemWasHovered,key:"hover",actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp},renderCustomInfo:i.customHoverRenderer?()=>i.customHoverRenderer(F(this.props)):null}))}getImageItem(e){const t=n.A.pick(this.props,["gotFirstScrollEvent","alt","title","description","id","idx","options","createUrl","createMagnifiedUrl","settings","isPrerenderMode","isTransparent","style","hasSecondaryMedia","secondaryMediaItem","customComponents"]);return s().createElement(U,Object.assign({},t,{key:"imageItem",imageDimensions:e,isThumbnail:!!this.props.thumbnailHighlightId,isCurrentHover:this.simulateHover(),itemWasHovered:this.state.itemWasHovered,actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,setItemLoaded:this.setItemLoaded}}))}get3dItem(e,t){const{calculatedAlt:i,title:o,description:r,id:a,idx:n,options:l,createUrl:h,createMagnifiedUrl:c,settings:u,isPrerenderMode:d,isTransparent:m,style:p,customComponents:g,scene:y,activeIndex:v,isCurrentHover:A}=this.props;return s().createElement(T,{key:"3dItem",imageDimensions:e,itemContainer:this.itemContainer,shouldPlay:this.props.idx===this.props.playing3DIdx,actions:Object.assign(Object.assign({},this.props.actions),{setItemLoaded:this.setItemLoaded,handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp}),hasLink:this.itemHasLink(),hover:t,activeIndex:v,calculatedAlt:i,createMagnifiedUrl:c,createUrl:h,customComponents:g,title:o,description:r,id:a,idx:n,isPrerenderMode:d,isTransparent:m,options:l,scene:y,style:p,settings:u,isCurrentHover:A})}getVideoItem(e,t){return s().createElement(j,Object.assign({},this.props,{shouldPlay:this.props.idx===this.props.playingVideoIdx,key:"video"+this.props.idx,hover:t,imageDimensions:e,hasLink:this.itemHasLink(),isCurrentHover:this.simulateHover(),actions:Object.assign(Object.assign({},this.props.actions),{setItemLoaded:this.setItemLoaded,handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp})}))}getTextItem(e){const t=n.A.pick(this.props,["id","options","style","html","cropRatio","isPrerenderMode","hasSecondaryMedia","secondaryMediaItem"]);return s().createElement($,Object.assign({},t,{key:"textItem",imageDimensions:e,isCurrentHover:this.simulateHover(),itemWasHovered:this.state.itemWasHovered,actions:{handleItemMouseDown:this.handleItemMouseDown,handleItemMouseUp:this.handleItemMouseUp,setItemLoaded:this.setItemLoaded}}))}getItemInner(){const{type:e,style:t,offset:i}=this.props;let o;const{innerWidth:r,innerHeight:a}=t,{innerTop:n,innerLeft:l}=i,h={width:r,height:a,marginTop:n,marginLeft:l};let c=null;switch(this.shouldHover()&&(c=this.getItemHover(h)),e){case"dummy":o=s().createElement("div",null);break;case"video":o=this.getVideoItem(h,c);break;case"text":o=[this.getTextItem(h),c];break;case"3d":o=this.get3dItem(h,c);break;default:o=this.props.isVideoPlaceholder?this.getVideoItem(h,c):[this.getImageItem(h),c]}return o}getRightInfoElementIfNeeded(){return a.A.hasExternalRightPlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)?this.getExternalInfoElement(a.A[c.A.layoutParams.info.placement].RIGHT,"gallery-item-right-info"):null}getLeftInfoElementIfNeeded(){return a.A.hasExternalLeftPlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)?this.getExternalInfoElement(a.A[c.A.layoutParams.info.placement].LEFT,"gallery-item-left-info"):null}getBottomInfoElementIfNeeded(){return a.A.hasExternalBelowPlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)?this.getExternalInfoElement(a.A[c.A.layoutParams.info.placement].BELOW,"gallery-item-bottom-info"):null}getTopInfoElementIfNeeded(){return a.A.hasExternalAbovePlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)?this.getExternalInfoElement(a.A[c.A.layoutParams.info.placement].ABOVE,"gallery-item-top-info"):null}getExternalInfoElement(e,t){const{options:i,customComponents:o,style:r}=this.props;if(!o.customInfoRenderer)return null;let n=null;const l=i[c.A.layoutParams.info.height]+(this.hasRequiredMediaUrl?0:r.height),h=r.infoWidth+(this.hasRequiredMediaUrl?0:r.width),u=o.customInfoRenderer(F(this.props),e),d=a.A.isLayout("SLIDESHOW")(this.props.options);return n=s().createElement("div",{className:"gallery-item-common-info-outer "+V(this.props,d),style:Object.assign({},N(e,i,r.height,i[c.A.layoutParams.info.height]))},s().createElement("div",{style:k(e,i,l,h),className:"gallery-item-common-info "+t,onClick:this.onItemInfoClick},u)),n}simulateHover(){return this.state.isCurrentHover||!0===this.props.options.alwaysShowHover||(0,u.Q)()&&this.props.options.previewHover}simulateOverlayHover(){return this.simulateHover()||this.props.options[c.A.behaviourParams.item.overlay.hoveringBehaviour]===a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour].ALWAYS_SHOW}itemHasLink(){const{linkData:e,linkUrl:t}=this.props;return!(void 0===e.type&&(void 0===t||""===t))}getItemContainerStyles(){const{idx:e,activeIndex:t,offset:i,style:o,options:r,settings:s={}}=this.props,n=r[c.A.layoutParams.structure.itemSpacing],l=r[c.A.behaviourParams.gallery.horizontal.slideAnimation],h=r[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,d=r[c.A.layoutParams.structure.scrollDirection],m=_(r),p={overflowY:"hidden",position:"absolute",bottom:"auto",margin:d===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?n/2+"px":0},{avoidInlineStyles:g}=s,y=this.props.isPrerenderMode&&!this.props.settings.disableSSROpacity,v=g?{}:{opacity:y?0:1,display:y?"none":"block",transition:"opacity .2s ease"},A=g?{}:{top:i.top,left:h?"auto":i.left,right:h?i.left:"auto",width:o.width+o.infoWidth,height:o.height+o.infoHeight};let b;switch(l){case a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].FADE:b={left:h?"auto":0,right:h?0:"auto",pointerEvents:t===e?"auto":"none",zIndex:t===e?0:1};break;case a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].DECK:b={left:h?"auto":0,right:h?0:"auto",pointerEvents:t===e?"auto":"none",zIndex:Math.sign(t-e)};break;default:b={}}const f=this.state.loaded&&((0,u.Q)()||(0,u.IL)())?{transition:"all .4s ease",transitionProperty:"top, left, width, height, opacity"}:{transition:"none"};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},p),A),m),f),v),b)}getItemWrapperStyles(){const{createUrl:e,options:t,style:i,type:o,offset:r}=this.props,{height:s,width:n,innerWidth:l,innerHeight:h}=i,{innerTop:u,innerLeft:d}=r;let m={};m.backgroundColor="text"===o?t[c.A.layoutParams.crop.method]!==a.A[c.A.layoutParams.crop.method].FIT?"transparent":"inherit":(t[c.A.layoutParams.crop.method]!==a.A[c.A.layoutParams.crop.method].FIT?i.bgColor:"inherit")||"transparent",t[c.A.behaviourParams.item.content.hoverAnimation]===a.A[c.A.behaviourParams.item.content.hoverAnimation].MAIN_COLOR&&(m=Object.assign(Object.assign({},m),{background:`url(${e(a.A.urlSizes.PIXEL,a.A.urlTypes.HIGH_RES)})`,backgroundSize:`${l}px ${h}px`,backgroundRepeat:"no-repeat",backgroundPosition:`top ${u}px left ${d}px`}));const{TILT:p}=a.A[c.A.behaviourParams.item.content.hoverAnimation];return t[c.A.behaviourParams.item.content.hoverAnimation]===p&&(m["--tiltAngleValue"]=t[c.A.behaviourParams.item.content.tiltAngleValue]),m.height=s+"px",m.width=n+"px",m.margin=-t[c.A.stylingParams.itemBorderWidth]+"px",m}getItemAriaLabel(){const{type:e,alt:t,htmlContent:i,options:o}=this.props;return{dummy:"",text:i,video:t||"Untitled video",image:t||"Untitled image"}[e]+(o.isStoreGallery?", Buy Now":"")}isItemClickable(e){const t=!this.itemHasLink();return!(e[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].NOTHING||e[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].LINK&&t)}getItemContainerClass(){const{options:e}=this.props,t=e[c.A.behaviourParams.item.content.placementAnimation],i=e[c.A.behaviourParams.item.overlay.hoverAnimation],o=e[c.A.behaviourParams.item.content.hoverAnimation],{FADE_IN:r,EXPAND:s,SLIDE_UP:l,SLIDE_RIGHT:h,SLIDE_DOWN:u,SLIDE_LEFT:d}=a.A[c.A.behaviourParams.item.overlay.hoverAnimation],{MAIN_COLOR:m,ZOOM_IN:p,TILT:g,BLUR:y,GRAYSCALE:v,SHRINK:A,INVERT:b,COLOR_IN:f,DARKENED:I}=a.A[c.A.behaviourParams.item.content.hoverAnimation],P=this.simulateHover(),S={"gallery-item-container":!0,"item-container-regular":!P,"item-container-hover":P,"has-custom-focus":!0,visible:!0,"pro-gallery-highlight":this.isHighlight(),clickable:this.isItemClickable(e),"simulate-hover":this.simulateHover(),"hide-hover":!this.simulateHover()&&n.A.isMobile(),"invert-hover":e[c.A.behaviourParams.item.overlay.hoveringBehaviour]===a.A[c.A.behaviourParams.item.overlay.hoveringBehaviour].DISAPPEARS,"animation-slide":t===a.A[c.A.behaviourParams.item.content.placementAnimation].SLIDE,"hover-animation-fade-in":i===r,"hover-animation-expand":i===s,"hover-animation-slide-up":i===l,"hover-animation-slide-right":i===h,"hover-animation-slide-down":i===u,"hover-animation-slide-left":i===d,"main-color-on-hover":o===m,"zoom-in-on-hover":o===p,"tilt-on-hover":o===g,"blur-on-hover":o===y,"grayscale-on-hover":o===v,"shrink-on-hover":o===A,"invert-on-hover":o===b,"color-in-on-hover":o===f,"darkened-on-hover":o===I,"pro-gallery-mobile-indicator":n.A.isMobile()};return Object.entries(S).map((([e,t])=>!!t&&e)).filter(Boolean).join(" ")}getItemWrapperClass(){const{options:e,type:t}=this.props,i=["gallery-item-wrapper","visible"];return e[c.A.layoutParams.crop.enable]&&i.push("cube-type-"+e[c.A.layoutParams.crop.method].toLowerCase()),"text"===t&&i.push("gallery-item-wrapper-text"),i.push(V(this.props)),i.join(" ")}getItemContainerTabIndex(){return this.isHighlight()?n.A.getTabIndex("currentThumbnail"):this.props.activeIndex===this.props.idx?n.A.getTabIndex("currentGalleryItem"):-1}componentDidMount(){if(n.A.isMobile()&&"function"==typeof s().initializeTouchEvents)try{s().initializeTouchEvents(!0)}catch(e){console.error(e)}h.A.addEventListener("current_hover_change",this.checkIfCurrentHoverChanged)}componentWillUnmount(){clearTimeout(this.itemLoadedTimeout),h.A.removeEventListener("current_hover_change",this.checkIfCurrentHoverChanged)}componentDidUpdate(e){(0,R.Xe)({prevProps:e,currentProps:this.props,itemContainer:this.itemContainer.current})}checkIfCurrentHoverChanged(e){e.galleryId===this.props.galleryId&&(this.state.isCurrentHover||e.currentHoverIdx!==this.props.idx?this.state.isCurrentHover&&e.currentHoverIdx!==this.props.idx&&this.setState({isCurrentHover:!1}):this.setState({isCurrentHover:!0,itemWasHovered:!0}))}onContextMenu(e){!n.A.isDev()&&this.props.options[c.A.behaviourParams.gallery.blockContextMenu]&&e.preventDefault(e)}getItemAriaRole(){switch(this.props.options[c.A.behaviourParams.item.clickAction]){case a.A[c.A.behaviourParams.item.clickAction].ACTION:return"button";case a.A[c.A.behaviourParams.item.clickAction].LINK:return"link";default:return""}}onContainerKeyUp(e){switch(e.keyCode||e.charCode){case 32:case 13:return e.stopPropagation(),this.onItemClick(e,"item-container",!1),this.shouldUseDirectLink()&&this.itemAnchor.click(),!1;default:return!0}}composeItem(){var e;const{photoId:t,id:i,hash:o,idx:r,options:n,type:l,url:h}=this.props;this.hasRequiredMediaUrl=h||"text"===l;const d=n[c.A.layoutParams.info.placement]!==a.A[c.A.layoutParams.info.placement].OVERLAY&&!this.hasRequiredMediaUrl,m=this.getItemAriaRole(),p=s().createElement("div",Object.assign({className:this.getItemContainerClass(),onContextMenu:e=>this.onContextMenu(e),id:M.getSellectorDomId(this.props),ref:this.itemContainer,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onFocus:this.onFocus,onBlur:this.onBlur,tabIndex:this.getItemContainerTabIndex(),"aria-label":this.getItemAriaLabel(),"data-hash":o,"data-id":t,"data-idx":r},m&&{role:m},{"data-hook":"item-container",key:"item-container-"+i,style:this.getItemContainerStyles(),onKeyUp:this.onContainerKeyUp,onClick:this.onItemWrapperClick}),this.getTopInfoElementIfNeeded(),this.getLeftInfoElementIfNeeded(),s().createElement("div",{style:Object.assign(Object.assign(Object.assign({},H(this.props.options)),a.A.hasExternalRightPlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)&&{float:"left"}),a.A.hasExternalLeftPlacement(this.props.options[c.A.layoutParams.info.placement],this.props.idx)&&{float:"right"})},!d&&s().createElement("div",{"data-hook":"item-wrapper",className:this.getItemWrapperClass(),key:"item-wrapper-"+i,id:"item-wrapper-"+i,style:this.getItemWrapperStyles()},this.getItemInner())),this.getRightInfoElementIfNeeded(),this.getBottomInfoElementIfNeeded()),g=function({directLink:e,options:t,directShareLink:i,noFollowForSEO:o}){const r=(0,u.Xf)();if(t[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].LINK){const{url:t,target:i}=e||{},s=r&&o?{rel:"nofollow"}:{};return t&&i?Object.assign({href:t,target:i},s):{}}if(t[c.A.behaviourParams.item.clickAction]===a.A[c.A.behaviourParams.item.clickAction].ACTION){const e=i,o=!!e,r=t[c.A.behaviourParams.gallery.enableIndexingShareLinks]?{}:{rel:"nofollow"};return o?Object.assign({href:e,"data-cancel-link":!0},r):{}}}(this.props),y={ref:e=>this.itemAnchor=e,"data-id":t,className:"item-link-wrapper","data-idx":r,"data-hook":"item-link-wrapper",onFocus:()=>{(0,R.tF)({itemAnchor:this.itemAnchor,enableExperimentalFeatures:this.props.enableExperimentalFeatures,itemContainer:this.itemContainer})},tabIndex:-1,onKeyDown:e=>{this.onAnchorKeyDown(e)}};return(null===(e=null==g?void 0:g.href)||void 0===e?void 0:e.length)>0?s().createElement("a",Object.assign({key:"item-container-link-"+i},y,g),p):s().createElement("div",Object.assign({key:"item-container-div-"+i},y),p)}render(){return this.composeItem()}}const Y=K;class Z extends s().Component{constructor(e){super(e),this.handleKeys=this.handleKeys.bind(this),this.showMoreItems=this.showMoreItems.bind(this),this.createGalleryConfig=this.createGalleryConfig.bind(this),this.screenLogs=this.screenLogs.bind(this),this.createGallery=this.createGallery.bind(this),this.id=Date.now()+"|"+Math.floor(1e4*Math.random()),this.state={activeIndex:0}}handleKeys(e){const t=h.A.document.activeElement.getAttribute("data-idx");if(t){const i=this.props.actions.findNeighborItem||this.props.galleryStructure.findNeighborItem||(()=>{}),o=Number(t);let r=-1;switch(e.keyCode||e.charCode){case 38:r=i(o,"up");break;case 37:r=i(o,this.props.options[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?"right":"left");break;case 40:if(r=i(o,"down"),this.props.totalItemsCount-1===r&&r===this.state.activeIndex)return e.stopPropagation(),n.A.focusGalleryElement(this.props.outOfViewComponent),!1;break;case 39:r=i(o,this.props.options[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?"left":"right");break;case 27:return e.stopPropagation(),n.A.focusGalleryElement(this.props.galleryContainerRef),!1}if(r>this.lastVisibleItemIdx()&&(r=o),r>=0)return e.preventDefault(),e.stopPropagation(),n.A.setStateAndLog(this,"Set Gallery Current Item",{activeIndex:r}),!1}return!0}lastVisibleItemIdxInHeight(e){for(let t=this.props.galleryStructure.items.length-1;t>=0;t--){if(this.props.galleryStructure.items[t].offset.top<e)return t}return this.items.length-1}lastVisibleItemIdx(){return this.lastVisibleItemIdxInHeight(this.props.container.galleryHeight-100)}showMoreItems(){var e;if(null===(e=this.props.settings)||void 0===e?void 0:e.isAccessible)try{const e=this.lastVisibleItemIdx();n.A.setStateAndLog(this,"Focus on Last Gallery Item",{activeIndex:e+1},(()=>{this.props.actions.toggleLoadMoreItems()}))}catch(e){console.warn("showMoreItems: Cannot find item to focus",e)}else this.props.actions.toggleLoadMoreItems()}createGallery(e){var t;const{options:i,settings:o,container:r,galleryStructure:n,getVisibleItems:l,virtualizationSettings:h,scrollTop:u}=this.props,d=this.createGalleryConfig(),m=s().createElement(p,Object.assign({},this.props.debug));let g;g=e?r.galleryHeight-138:n.height+"px";const y=this.props.isPrerenderMode?"auto":this.props.container.galleryWidth-i[c.A.layoutParams.structure.itemSpacing],v=function({items:e,options:t,virtualizationSettings:i,galleryWidth:o,galleryHeight:r,scrollPosition:s}){const{enabled:n=!1,forwardItemScrollMargin:l=10,backwardItemScrollMargin:h=10}=i||{};if(!n)return e.map((e=>({item:e,shouldRender:!0})));const u=t[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL,d=u?o:r,m=u?"width":"height";function p(e){const t=e.group,i=t["height"===m?"top":"left"],o=i+t[m];return i>s-d*h&&o<s+d*l}return e.map((e=>({item:e,shouldRender:p(e)})))}({items:l(n.galleryItems,r,this.props.isPrerenderMode),options:i,virtualizationSettings:h,galleryHeight:Math.min(n.height,(null===(t=r.screen)||void 0===t?void 0:t.height)||n.height),scrollPosition:u||0}),A=v.map((({item:e,shouldRender:t},i)=>{const o=e.renderProps(Object.assign(Object.assign({},d),{visible:e.isVisible,key:`itemView-${e.id}-${i}`}));return s().createElement(Y,Object.assign(Object.assign({},o),{type:t?o.type:"dummy"}))}));return s().createElement("div",{id:this.props.galleryContainerId,className:"pro-gallery inline-styles "+(i[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?" one-row slider hide-scrollbars ":"")+((null==o?void 0:o.isAccessible)?" accessible ":"")+(i[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?" rtl ":" ltr "),style:{height:g,overflowX:"hidden"},onKeyDown:this.handleKeys},s().createElement("div",{id:`pro-gallery-margin-container-${this.props.id}`,className:"pro-gallery-margin-container",style:{margin:(this.props.options.galleryMargin||this.props.options[c.A.layoutParams.structure.gallerySpacing])+"px",height:g,width:y,overflow:"visible",position:"relative"}},m,A))}createGalleryConfig(){return{scrollingElement:this.props.scrollingElement,scroll:this.props.scroll,container:this.props.container,options:this.props.options,settings:this.props.settings,activeIndex:this.state.activeIndex,customComponents:this.props.customComponents,galleryId:this.props.id,gotFirstScrollEvent:this.props.gotFirstScrollEvent,playingVideoIdx:this.props.playingVideoIdx,playing3DIdx:this.props.playing3DIdx,noFollowForSEO:this.props.noFollowForSEO,isPrerenderMode:this.props.isPrerenderMode,firstUserInteractionExecuted:this.props.firstUserInteractionExecuted,enableExperimentalFeatures:this.props.enableExperimentalFeatures,actions:{eventsListener:this.props.actions.eventsListener}}}screenLogs(){return n.A.shouldDebug("screenLogs")?s().createElement("div",{className:"screen-logs"},"URL width: ",n.A.parseGetParam("width"),", Container: ",JSON.stringify(this.props.container.galleryWidth),", window.document.body.clientWidth ",document.body.clientWidth,", window.innerWidth ",h.A.innerWidth,", window.screen.width: ",h.A.screen.width):""}createShowMoreButton(){if("function"==typeof this.props.customComponents.customLoadMoreRenderer)return s().createElement("div",{onClick:this.showMoreItems},this.props.customComponents.customLoadMoreRenderer(this.props));const{options:e}=this.props;let t=!1;if(this.props.displayShowMore&&this.props.galleryStructure.height>this.props.container.height){const i=e[c.A.behaviourParams.gallery.vertical.loadMore.text]||"Load More";t=s().createElement("div",{className:"show-more-container"+(n.A.isMobile()?" pro-gallery-mobile-indicator":"")},s().createElement("button",{tabIndex:n.A.getTabIndex("loadMoreButton"),id:"show-more-"+this.props.id,className:"show-more",onClick:this.showMoreItems,onMouseDown:e=>e.preventDefault(),"data-hook":"show-more","aria-label":i},i))}return t}render(){n.A.isVerbose()&&(console.count("galleryView render"),console.time("Rendering Gallery took "),console.log("[DEBUG_RENDER] GalleryView options",this.props.options),console.log("[DEBUG_RENDER] GalleryView props changed",n.A.printableObjectsDiff(this.lastProps||{},this.props)),this.lastProps=Object.assign({},this.props),console.log("[DEBUG_RENDER] GalleryView state changed",n.A.printableObjectsDiff(this.lastState||{},this.state)),this.lastState=Object.assign({},this.state),this.renderCount=(this.renderCount||0)+1);const e=this.createShowMoreButton(),t=this.createGallery(e);n.A.isVerbose()&&console.timeEnd("Rendering Gallery took ");const i=this.screenLogs();return s().createElement("div",Object.assign({className:"pro-gallery-parent-container",key:`pro-gallery-${this.id}`},n.A.getAriaAttributes({proGalleryRole:this.props.proGalleryRole,proGalleryRegionLabel:this.props.proGalleryRegionLabel})),i,t,e)}}const X=Z;class q extends s().Component{constructor(e){super(e),this.displayName="GroupView",this.dom=[],this.state={}}createDom(e,t){return this.props.items.map((i=>{const o=i.renderProps(Object.assign(Object.assign({},this.props.galleryConfig),{visible:e}));return s().createElement(Y,Object.assign(Object.assign({},o),{type:null!=t&&t?"dummy":o.type}))}))}shouldRender(){const{items:e}=this.props;return!!(e&&e.length&&e[0])}isVisible(){const{items:e,galleryConfig:t}=this.props;if(this.props.allowLoop){const{idx:i}=e[e.length-1],{activeIndex:o,totalItemsCount:r}=t,s=o-i,a=Math.floor(r/2);return Math.abs(s)<=a}return!0}render(){const{options:e}=this.props.galleryConfig,t=e[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT;return this.shouldRender()?s().createElement("div",{key:`group_${this.props.idx}_${this.props.items[0].id}`,"data-hook":"group-view",className:`group-view group-view-${this.props.idx}`,style:{"--group-top":this.props.top+"px","--group-left":t?"auto":this.props.left+"px","--group-width":this.props.width+"px","--group-right":t?this.props.left+"px":"auto"},"aria-hidden":this.props.ariaHidden},this.createDom(this.isVisible(),this.props.shouldRenderEmpty)):null}}const Q=q;var J=i(62688),ee=i.n(J);const te=e=>{var{size:t}=e,i=(0,o.__rest)(e,["size"]);return s().createElement("svg",Object.assign({viewBox:"0 0 11 14",fill:"currentColor",width:t||"11",height:t||"14"},i),s().createElement("g",{id:"final",stroke:"none",fill:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{id:"Pause",transform:"translate(-490 -763)",fill:"currentColor"},s().createElement("g",{id:"Group-2",transform:"translate(470 284)"},s().createElement("g",{id:"Group",transform:"translate(20 479)"},s().createElement("path",{id:"play",d:"M0.0788076641 0L0 14 10.5 6.81856071z"}))))))};te.displayName="play",te.propTypes={size:ee().string};const ie=te,oe=e=>{var{size:t}=e,i=(0,o.__rest)(e,["size"]);return s().createElement("svg",Object.assign({viewBox:"0 0 10 14",fill:"currentColor",width:t||"10",height:t||"14"},i),s().createElement("g",{id:"final",stroke:"none",fill:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{id:"Play",transform:"translate(-490 -763)",fill:"currentColor"},s().createElement("g",{id:"Group-2",transform:"translate(470 284)"},s().createElement("g",{id:"Group",transform:"translate(20 479)"},s().createElement("path",{d:"M7,0 L10,0 L10,14 L7,14 L7,0 Z M0,0 L3,0 L3,14 L0,14 L0,0 Z",id:"_copy_3"}))))))};oe.displayName="pause",oe.propTypes={size:ee().string};const re=oe;function se({activeIndex:e,prevActiveIndex:t,activeIndexOffsetMemory:i,items:o}){const r=o.length;if(e===t)return i;e=n.A.inRange(e,r);const s=Math.abs(t-e),a=Math.abs(t-r-e),l=Math.abs(t+r-e);return l<a&&l<s?i-r:a<l&&a<s?i+r:i}function ae(e,t){var i;return(i=t,n.A.uniqueBy(i,"id").filter((e=>void 0!==e.idx)).sort(((e,t)=>e.idx-t.idx))).map((t=>({item:e.find((e=>e.id===t.id)),thumbnailItem:t,idx:t.idx})))}function ne({horizontalThumbnails:e,containerWidth:t,containerHeight:i,thumbnailSize:o}){return e?{width:t,height:o}:{width:o,height:i}}function le({width:e,height:t,horizontalThumbnails:i}){return i?Math.ceil(e/t):Math.ceil(t/e)}function he({horizontalThumbnails:e,width:t,height:i,activeIndex:o,thumbnailSizeWithSpacing:r,itemsCount:s}){const a={overflow:"visible",width:t,height:i},n=e?"left":"top",l=r*(o%s),h=(e?t:i)/2-r/2;return Object.assign(Object.assign({},a),{[n]:l<h?0:h-l})}function ce({thumbnailAlignment:e,thumbnailsMarginToGallery:t}){if(e===a.A[c.A.layoutParams.thumbnails.alignment].BOTTOM||e===a.A[c.A.layoutParams.thumbnails.alignment].TOP){const i=e===a.A[c.A.layoutParams.thumbnails.alignment].TOP;return{marginTop:i?0:t,marginBottom:i?t:0}}const i=e===a.A[c.A.layoutParams.thumbnails.alignment].LEFT;return{marginLeft:i?0:t,marginRight:i?t:0}}function ue({thumbnailAlignment:e,thumbnailSizeWithSpacing:t,offset:i,isRTL:o}){const r=i*t;return e===a.A[c.A.layoutParams.thumbnails.alignment].BOTTOM||e===a.A[c.A.layoutParams.thumbnails.alignment].TOP?{[o?"right":"left"]:r}:{[o?"bottom":"top"]:r}}const de={getThumbnailsData:function({options:e,activeIndex:t,items:i,thumbnailAlignment:o,galleryStructure:r,containerWidth:s,containerHeight:l,activeIndexOffsetMemory:h=t,prevActiveIndex:u=t}){const d=ae(i,r.galleryItems),m=(h=se({activeIndex:t,activeIndexOffsetMemory:h,items:d,prevActiveIndex:u}))+t,p=e[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT;n.A.isVerbose()&&console.log("creating thumbnails for idx",t);const g=e[c.A.layoutParams.thumbnails.size],y=g+e[c.A.layoutParams.thumbnails.spacing],v=o===a.A[c.A.layoutParams.thumbnails.alignment].BOTTOM||o===a.A[c.A.layoutParams.thumbnails.alignment].TOP,{width:A,height:b}=ne({horizontalThumbnails:v,containerWidth:s,containerHeight:l,thumbnailSize:g}),f=le({width:A,height:b,horizontalThumbnails:v}),I=f%2==1?f:f+1,P=m-(I-1)/2,S=P+I,w=n.A.sliceArrayIfAvailable(d,P,S),E=he({horizontalThumbnails:v,width:A,height:b,thumbnailSizeWithSpacing:y,activeIndex:m,itemsCount:d.length}),C=p?Object.assign(Object.assign({},E),{left:void 0,top:void 0,right:E.left,bottom:E.top}):E,T=ce({thumbnailAlignment:o,thumbnailsMarginToGallery:e[c.A.layoutParams.thumbnails.marginToGallery]});return{items:w.map((({item:e,thumbnailItem:t,idx:i},r)=>{const s=r+w[0].idx;return{thumbnailItem:t,item:e,location:ue({thumbnailAlignment:o,offset:s,isRTL:p,thumbnailSizeWithSpacing:y}),idx:i}})),thumbnailsMargins:T,horizontalThumbnails:v,thumbnailsStyle:C,activeIndexOffsetMemory:h}},getThumbnailsContainerSize:ne,getNumberOfThumbnails:le,getThumbnailsStyles:he,getThumbnailsContainerMargin:ce,getThumbnailLocation:ue,calculateActiveIndexOffset:se,clearGalleryItems:ae};class me extends s().Component{constructor(e){super(e),this.scrollToThumbnail=this.scrollToThumbnail.bind(this)}scrollToThumbnail(e){this.props.navigationToIdxCB(e)}createThumbnails({navigationPanelPosition:e,thumbnailAlignment:t,options:i,galleryStructure:o,settings:r}){const l=de.clearGalleryItems(this.props.items,this.props.galleryStructure.galleryItems),h=n.A.inRange(this.props.activeIndex,l.length),{horizontalThumbnails:u,items:d,thumbnailsMargins:m,thumbnailsStyle:p,activeIndexOffsetMemory:g}=de.getThumbnailsData({items:this.props.items,activeIndex:h,options:i,galleryStructure:o,thumbnailAlignment:t,containerHeight:this.props.container.height,containerWidth:this.props.container.width,activeIndexOffsetMemory:this.activeIndexOffsetMemory,prevActiveIndex:this.prevActiveIndex});return this.prevActiveIndex=h,this.activeIndexOffsetMemory=g,s().createElement("div",{className:"pro-gallery inline-styles thumbnails-gallery "+(this.props.domOrder?"thumbnails-gallery-"+this.props.domOrder:"")+(u?" one-row hide-scrollbars ":"")+(i[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?" rtl ":" ltr ")+((null==r?void 0:r.isAccessible)?" accessible ":""),style:Object.assign(Object.assign(Object.assign(Object.assign({},this.props.isPrerenderMode?{display:"block"}:{}),{width:p.width,height:p.height}),m),ye({galleryThumbnailsAlignment:t,navigationPanelPosition:e})),"data-hook":"gallery-thumbnails"},s().createElement("div",{"data-hook":"gallery-thumbnails-column",className:"galleryColumn",key:"thumbnails-column",style:Object.assign({},p)},d.map((({thumbnailItem:e,location:t,idx:o})=>{const r=o===h%d.length,l=Object.assign(Object.assign({width:i[c.A.layoutParams.thumbnails.size],height:i[c.A.layoutParams.thumbnails.size],overflow:"hidden",backgroundImage:`url(${e.createUrl(a.A.urlSizes.THUMBNAIL,a.A.urlTypes.HIGH_RES)})`},t),this.props.isPrerenderMode?{opacity:0}:{});return s().createElement("div",{key:"thumbnail-"+e.id+(Number.isInteger(o)?"-"+o:""),className:"thumbnailItem thumbnail-"+e.idx+(r?" pro-gallery-thumbnails-highlighted pro-gallery-highlight"+(n.A.isMobile()?" pro-gallery-mobile-indicator":""):""),"data-key":e.id,style:l,onClick:()=>this.scrollToThumbnail(o),tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&this.scrollToThumbnail(o)}},"video"===e.type&&i[c.A.behaviourParams.item.video.enableThumbnailsPlayButton]&&s().createElement(P.v,{type:"videoPlayButton",size:"28"}),"3d"===e.type&&i[c.A.behaviourParams.item.threeDimensionalScene.enableThumbnailsPlayButton]&&s().createElement(P.v,{type:"rotateArrow",size:"28"}),"text"===e.type?s().createElement(x,Object.assign({},this.props,e.renderProps(),{options:Object.assign(Object.assign({},i),{[c.A.layoutParams.crop.method]:a.A[c.A.layoutParams.crop.method].FILL,[c.A.layoutParams.crop.enable]:!0}),actions:{},imageDimensions:Object.assign(Object.assign({},l),{marginTop:0,marginLeft:0}),style:Object.assign(Object.assign({},e.renderProps().style),l)})):null)}))))}render(){const e={navigationPanelPosition:this.props.options[c.A.layoutParams.thumbnails.position],thumbnailAlignment:this.props.options[c.A.layoutParams.thumbnails.alignment],options:this.props.options,galleryStructure:this.props.galleryStructure,settings:this.props.settings};return this.createThumbnails(e)}}const pe=({width:e,height:t,galleryHeight:i,navigationPanelPosition:o})=>o===a.A[c.A.layoutParams.thumbnails.position].ON_GALLERY?{}:{width:e,height:t-i},ge=({galleryHeight:e,galleryWidth:t,height:i,width:o,galleryThumbnailsAlignment:r,navigationPanelPosition:s})=>{switch(r){case a.A[c.A.layoutParams.thumbnails.alignment].TOP:case a.A[c.A.layoutParams.thumbnails.alignment].BOTTOM:return pe({galleryHeight:e,galleryWidth:t,height:i,width:o,navigationPanelPosition:s});case a.A[c.A.layoutParams.thumbnails.alignment].RIGHT:case a.A[c.A.layoutParams.thumbnails.alignment].LEFT:return(({width:e,height:t,galleryWidth:i,navigationPanelPosition:o})=>o===a.A[c.A.layoutParams.thumbnails.position].ON_GALLERY?{}:{width:e-i,height:t})({galleryHeight:e,galleryWidth:t,height:i,width:o,navigationPanelPosition:s});default:return!1}},ye=({galleryThumbnailsAlignment:e,navigationPanelPosition:t})=>{if(t===a.A[c.A.layoutParams.thumbnails.position].ON_GALLERY){let t={position:"absolute"};return t[e.toLowerCase()]=0,t}},ve=me;var Ae=i(83202),be=i(42383);const fe={DEFAULT_ARROW:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"23",height:"39",viewBox:"0 0 23 39"},s().createElement("path",{d:"M857.005,231.479L858.5,230l18.124,18-18.127,18-1.49-1.48L873.638,248Z",transform:"translate(-855 -230)"})),width:23,height:39},ARROW_2:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"40px",height:"33px",viewBox:"0 0 40 33",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{id:"Artboard-Copy-93",transform:"translate(-28.000000, -32.000000)",fillRule:"nonzero"},s().createElement("polygon",{id:"4",points:"51.5515789 32 67.6 48.0484211 51.5515789 64.0968421 46.9663158 59.5115789 54.9880947 51.4881326 28 51.4897902 28 44.9245271 55.30728 44.9243284 46.9663158 36.5852632"})))),width:40,height:33},ARROW_3:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"25px",height:"42px",viewBox:"0 0 25 42",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{id:"Artboard-Copy-97",transform:"translate(-36.000000, -27.000000)",fillRule:"nonzero"},s().createElement("path",{d:"M37.2206398,28.239114 C38.8026583,26.647265 41.3436172,26.5881667 42.9967317,28.0675785 L43.1590153,28.2206482 L59.1611748,44.1233571 C61.1319602,46.0819718 61.1995454,49.2312919 59.3527322,51.2754674 L59.1795659,51.4581932 L43.1590166,67.3793505 C41.51408,69.0140701 38.8553922,69.0057967 37.2206146,67.3608606 C35.638653,65.7689547 35.5953873,63.2276769 37.0850712,61.5838107 L37.2391492,61.4224839 L50.946,47.799 L37.2391492,34.1775161 C35.7003375,32.6482622 35.5938031,30.2229032 36.9247365,28.5696317 L37.0675472,28.4014262 L37.2206398,28.239114 Z",id:"8"})))),width:25,height:42},ARROW_4:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"39px",height:"11px",viewBox:"0 0 39 11",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{transform:"translate(-29.000000, -43.000000)",fillRule:"nonzero"},s().createElement("polygon",{points:"59.79296 43 67.1767272 48.2074587 59.79296 53.3482492 59.792 49.24 29 49.2402303 29 47.3156703 59.792 47.315"})))),width:39,height:11},ARROW_5:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"39px",height:"25px",viewBox:"0 0 39 25",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{transform:"translate(-29.000000, -36.000000)",fillRule:"nonzero"},s().createElement("path",{d:"M29,48.2400242 C29,47.3087892 29.6817196,46.6578788 30.6657131,46.6578788 L62.0721815,46.6578788 L53.6034603,38.6027842 C52.9919732,38.0244263 52.9745394,37.0965804 53.5626533,36.4993057 L53.6196503,36.4424086 C54.2232252,35.8695838 55.2162345,35.8487051 55.8566495,36.4049822 L66.7354947,46.6987178 C66.8997789,46.8532785 67.0362567,47.0299812 67.1410943,47.2233734 C67.6421069,47.9137524 67.5952684,48.7577348 67.0654839,49.3382112 L66.9183084,49.529704 C66.8745903,49.5829565 66.834409,49.6278886 66.7923536,49.6712745 L55.84922,60.0371144 C55.2232594,60.6516206 54.1974244,60.6696143 53.554893,60.0838114 C52.9168128,59.5020667 52.8980482,58.5443858 53.5126939,57.940867 L53.5761731,57.877497 L62.0800244,49.8549119 L30.6657131,49.8549119 C29.6912419,49.8549119 29,49.1805348 29,48.2400242 Z",id:"5"})))),width:39,height:25},ARROW_6:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"26px",height:"40px",viewBox:"0 0 26 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{transform:"translate(-35.000000, -28.000000)",fillRule:"nonzero"},s().createElement("polygon",{points:"60.4571429 47.8 40.6571429 67.6 35 61.9428571 49.1433951 47.7994621 35 33.6571429 40.6571429 28"})))),width:26,height:40},ARROW_7:{SvgComp:({style:e})=>s().createElement("svg",{className:"slideshow-arrow",style:e,width:"40px",height:"33px",viewBox:"0 0 40 33",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s().createElement("g",{stroke:"none",strokeWidth:"1",fillRule:"evenodd"},s().createElement("g",{transform:"translate(-28.000000, -32.000000)",strokeWidth:"nonzero"},s().createElement("polygon",{transform:"translate(47.800000, 48.469489) rotate(-180.000000) translate(-47.800000, -48.469489) ",points:"43.2916087 32 44.4061622 33.1660321 30.8430707 47.6817192 67.6 47.6813756 67.6 49.2576026 30.9452714 49.2580761 44.4061622 63.772946 43.2924258 64.9389782 28.8681974 49.4277178 28 48.5197421"})))),width:40,height:33}},Ie=({customNavArrowsRenderer:e,arrowsSize:t,svgData:i,containerStyleType:o})=>{const r=i.width/i.height>1;if(o===a.A[c.A.layoutParams.navigationArrows.container.type].BOX){return{navArrowsContainerWidth:t,navArrowsContainerHeight:t,scalePercentage:t/2.4/(r?i.width:i.height)}}if(e)return{navArrowsContainerWidth:t,navArrowsContainerHeight:t};const s=t/i.width;return{scalePercentage:s,navArrowsContainerWidth:t,navArrowsContainerHeight:i.height*s}},Pe=e=>{const t=Se(e),i=t.options[c.A.layoutParams.navigationArrows.enable],{galleryWidth:o}=t.container,{isPrerenderMode:r,galleryStructure:s,customNavArrowsRenderer:n}=t,l={options:t.options,container:t.container,customNavArrowsRenderer:n},h=s.width<=o;return!!i&&!r&&(({options:e,container:t,customNavArrowsRenderer:i})=>{const{height:o}=t,r=we(e[c.A.layoutParams.navigationArrows.type]),{navArrowsContainerHeight:s}=Ie({customNavArrowsRenderer:i,arrowsSize:e[c.A.layoutParams.navigationArrows.size],svgData:r,containerStyleType:e[c.A.layoutParams.navigationArrows.container.type]}),n=e[c.A.layoutParams.info.height];return{[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].INFO_CENTER]:n,[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].IMAGE_CENTER]:o-n,[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].ITEM_CENTER]:o}[e[c.A.layoutParams.navigationArrows.verticalAlignment]]>=s})(l)&&!h},Se=e=>{const{isPrerenderMode:t,galleryStructure:i,customNavArrowsRenderer:o}=e;return{options:e.options,container:e.container,isPrerenderMode:t,galleryStructure:i,customNavArrowsRenderer:o}},we=(e=a.A[c.A.layoutParams.navigationArrows.type].DEFAULT_ARROW)=>{const{DEFAULT_ARROW:t,ARROW_2:i,ARROW_3:o,ARROW_4:r,ARROW_5:s,ARROW_6:n,ARROW_7:l}=a.A[c.A.layoutParams.navigationArrows.type];let h;switch(e){case i:h=fe.ARROW_2;break;case o:h=fe.ARROW_3;break;case r:h=fe.ARROW_4;break;case s:h=fe.ARROW_5;break;case n:h=fe.ARROW_6;break;case l:h=fe.ARROW_7;break;default:h=fe.DEFAULT_ARROW}return h};function Ee({options:e,hideLeftArrow:t,hideRightArrow:i,container:o,customNavArrowsRenderer:r,next:l,id:h}){const u=e[c.A.layoutParams.structure.itemSpacing],d=e[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,m=e[c.A.layoutParams.navigationArrows.position],p=e[c.A.layoutParams.navigationArrows.padding],g=e[c.A.layoutParams.structure.scrollDirection],y=e[c.A.layoutParams.navigationArrows.mouseCursorContainerMaxWidth],{arrowRenderer:v,navArrowsContainerWidth:A,navArrowsContainerHeight:b}=(({customNavArrowsRenderer:e,arrowsColor:t,arrowsSize:i,arrowsType:o,containerStyleType:r})=>{const l=we(o),{navArrowsContainerWidth:h,navArrowsContainerHeight:u,scalePercentage:d}=Ie({customNavArrowsRenderer:e,arrowsSize:i,svgData:l,containerStyleType:r});if(e){const t=r===a.A[c.A.layoutParams.navigationArrows.container.type].BOX?i/2.4:i;return{arrowRenderer:i=>s().createElement("div",{style:{width:t,height:t}},e(i)),navArrowsContainerWidth:h,navArrowsContainerHeight:u}}return{arrowRenderer:e=>{const i={transform:`scaleX(${"right"===e?1:-1}) scale(${d})`,fill:n.A.isMobile()&&(null==t?void 0:t.value)?t.value:""};return s().createElement(l.SvgComp,{style:i})},navArrowsContainerWidth:h,navArrowsContainerHeight:u}})({customNavArrowsRenderer:r,arrowsColor:e[c.A.stylingParams.arrowsColor],arrowsSize:e[c.A.layoutParams.navigationArrows.size],arrowsType:e[c.A.layoutParams.navigationArrows.type],containerStyleType:e[c.A.layoutParams.navigationArrows.container.type]}),f=m===a.A[c.A.layoutParams.navigationArrows.position].MOUSE_CURSOR,{galleryHeight:I}=o,P=e[c.A.layoutParams.info.height],S=I-P,w=`50% + ${u/4}px`;let E;a.A.hasExternalAbovePlacement(e[c.A.layoutParams.info.placement])?E=-1:a.A.hasExternalBelowPlacement(e[c.A.layoutParams.info.placement])&&(E=1);const C={[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].ITEM_CENTER]:0,[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].IMAGE_CENTER]:P*E,[a.A[c.A.layoutParams.navigationArrows.verticalAlignment].INFO_CENTER]:-S*E}[e[c.A.layoutParams.navigationArrows.verticalAlignment]],T=(({type:e,backgroundColor:t,borderRadius:i})=>e===a.A[c.A.layoutParams.navigationArrows.container.type].BOX?{backgroundColor:t,borderRadius:`${i}%`}:{})({type:e[c.A.layoutParams.navigationArrows.container.type],backgroundColor:e[c.A.layoutParams.navigationArrows.container.backgroundColor],borderRadius:e[c.A.layoutParams.navigationArrows.container.borderRadius]}),O=f?Object.assign({width:`${A}px`,height:`${b}px`},T):Object.assign({width:`${A}px`,height:`${b}px`,padding:0,top:`calc(${w} - ${b/2}px - \n        ${C/2}px)`},T),x=g===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&m===a.A[c.A.layoutParams.navigationArrows.position].OUTSIDE_GALLERY?`-${20+A}px`:`${u/2+(p||0)}px`,L={left:f?0:x},R={right:f?0:x},M=["nav-arrows-container",{BOX:"box",SHADOW:"shadow",NONE:"only-arrows"}[e[c.A.layoutParams.navigationArrows.container.type]]||"",n.A.isMobile()?" pro-gallery-mobile-indicator":""],_=`arrow-portal-container-${h}`,H=f?Te:Ce,D=e=>s().createElement(H,Object.assign({},{renderArrowSvg:v,next:l,directionIsLeft:e,arrowsBaseClasses:M,tabIndex:n.A.getTabIndex.bind(n.A),containerStyle:O,prevContainerStyle:L,nextContainerStyle:R,isRTL:d,hideLeftArrow:t,hideRightArrow:i,arrowBoxStyle:T,navArrowsContainerWidth:A,navArrowsContainerHeight:b,navigationArrowPortalId:_,mouseCursorContainerMaxWidth:y,id:h}));return s().createElement(Oe,{hideLeftArrow:t,hideRightArrow:i,mouseCursorEnabled:f,isRTL:d,navigationArrowPortalId:_},(N=s().createElement(s().Fragment,null,t?null:D(!0),i?null:D(!1)),f?s().createElement(be.N9,{id:h},N):N));var N}function Ce({cursor:e,arrowsBaseClasses:t,containerStyle:i,prevContainerStyle:o,nextContainerStyle:r,isRTL:a,directionIsLeft:n,renderArrowSvg:l,next:h,tabIndex:c,arrowBoxStyle:u,navArrowsContainerWidth:d,navArrowsContainerHeight:m,navigationArrowPortalId:p}){const g=n&&a||!n&&!a,y=()=>h({direction:n?-1:1}),v={className:t.join(" "),onClick:()=>setTimeout(y,0),"aria-label":(g?"Next":"Previous")+" Item",tabIndex:c(g?"slideshowNext":"slideshowPrev"),key:g?"nav-arrow-next":"nav-arrow-back","data-hook":g?"nav-arrow-next":"nav-arrow-back",style:Object.assign(Object.assign({},i),n?o:r)};if(e){const{containerRef:t,isMouseEnter:i,position:o}=e;return s().createElement("button",Object.assign({ref:e=>t.current=e},v),i&&Ae.createPortal(s().createElement("span",{style:Object.assign(Object.assign({top:o.y-m/2,left:o.x-d/2},u),{width:d,height:m})},l(n?"left":"right")),window.document.getElementById(p)))}return s().createElement("button",Object.assign({},v),l(n?"left":"right"))}function Te(e){const{directionIsLeft:t,next:i,mouseCursorContainerMaxWidth:o,hideLeftArrow:r,hideRightArrow:a,renderArrowSvg:n,containerStyle:l,arrowsBaseClasses:h,navArrowsContainerWidth:c,navArrowsContainerHeight:u}=e,d=r||a;return s().createElement(be.QH,{id:e.id,mouseCursorContainerMaxWidth:o,navArrowsContainerWidth:c,navArrowsContainerHeight:u,onNavigate:()=>i({direction:t?-1:1}),direction:t?"left":"right",isTheOnlyArrow:d},((e,i)=>s().createElement("div",{style:{top:i,left:e},className:"follow-mouse-cursor"},s().createElement("div",{className:h.join(" "),style:Object.assign(Object.assign({},l),{top:-u/2,left:-c/2})},n(t?"left":"right")))))}function Oe({hideRightArrow:e,hideLeftArrow:t,mouseCursorEnabled:i,isRTL:o,children:r,navigationArrowPortalId:a}){if(i){const i={justifyContent:t?"flex-end":e?"flex-start":"space-between",flexDirection:o?"row-reverse":"row"};return s().createElement("div",{className:"mouse-cursor",style:Object.assign({},i)},s().createElement("div",{id:a,className:"arrow-portal-container"}),r)}return s().Fragment?s().createElement(s().Fragment,null,r):s().createElement("div",null,r)}function xe(e){if([33,37,38].includes(e))return-1;if([32,34,39,40].includes(e))return 1;throw new Error(`no direction is defined for charCode: ${e}`)}class Le extends s().Component{constructor(e){super(e),this.autoScrollToNextItem=()=>{if(!(0,u.Q)()&&(this.props.isInViewport||(0,u.IL)())){const{options:e}=this.props,t=e.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?-1:1;e.behaviourParams_gallery_horizontal_autoSlide_behaviour===a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].CONTINUOUS?this._next({direction:t,isAutoTrigger:!0,isContinuousScrolling:!0}):e.behaviourParams_gallery_horizontal_autoSlide_behaviour===a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].INTERVAL&&this._next({direction:t,isAutoTrigger:!0,scrollDuration:800})}},this.getCustomNavigationPanel=()=>{var e;return"function"==typeof(null===(e=this.props.customComponents)||void 0===e?void 0:e.EXPERIMENTAL_customNavigationPanelRenderer)&&this.props.customComponents.EXPERIMENTAL_customNavigationPanelRenderer},this.createOrGetCustomNavigationPanelAPI=()=>{const e=this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT;return this.navigationPanelAPI||(this.navigationPanelAPI={onGalleryNavigationStart:e=>{this.props.actions.eventsListener(a.A.events.GALLERY_NAVIGATION_START,e)},next:()=>{this.next({scrollDuration:400,isKeyboardNavigation:!1,isAutoTrigger:!1,avoidIndividualNavigation:!1,isContinuousScrolling:!1,direction:e?-1:1})},previous:()=>{this.next({scrollDuration:400,isKeyboardNavigation:!1,isAutoTrigger:!1,avoidIndividualNavigation:!1,isContinuousScrolling:!1,direction:e?1:-1})},navigateNextEnabled:()=>e?!this.state.hideLeftArrow:!this.state.hideRightArrow,navigatePreviousEnabled:()=>e?!this.state.hideRightArrow:!this.state.hideLeftArrow,currentIndex:()=>this.state.activeIndex,triggerItemClick:(e,{itemIndex:t=this.state.activeIndex}={})=>{const i=this.createGalleryConfig(),o=this.props.galleryStructure.galleryItems[t%this.props.totalItemsCount],r=null==o?void 0:o.renderProps(Object.assign(Object.assign({},i),{visible:!0}));this.props.actions.eventsListener(a.A.events.ITEM_ACTION_TRIGGERED,r,e)},navigateToIndex:(e,t=400)=>{this.scrollToIndex({itemIdx:e,scrollDuration:t})}}),this.props.actions.eventsListener(a.A.events.NAVIGATION_API_READY,this.navigationPanelAPI),this.navigationPanelAPI},this.navigationPanelCallbackOnIndexChange=()=>{},this.scrollToThumbnail=this.scrollToThumbnail.bind(this),this.clearAutoSlideshowInterval=this.clearAutoSlideshowInterval.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onAutoSlideShowButtonClick=this.onAutoSlideShowButtonClick.bind(this),this.startAutoSlideshowIfNeeded=this.startAutoSlideshowIfNeeded.bind(this),this.updateAutoSlideShowState=this.updateAutoSlideShowState.bind(this),this.canStartAutoSlideshow=this.canStartAutoSlideshow.bind(this),this.handleSlideshowKeyPress=this.handleSlideshowKeyPress.bind(this),this.onAutoSlideshowAutoPlayKeyPress=this.onAutoSlideshowAutoPlayKeyPress.bind(this),this.setCurrentItemByScroll=this.setCurrentItemByScroll.bind(this),this._setCurrentItemByScroll=n.A.throttle(this.setCurrentItemByScroll,600).bind(this),this._next=n.A.throttle(this.nextWithEffects.bind(this),e.isScrollLessGallery?600:400).bind(this),this.state={activeIndex:e.activeIndex||0,isInView:!0,pauseAutoSlideshowClicked:!1,hideLeftArrow:e.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].LEFT_TO_RIGHT,hideRightArrow:e.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,shouldBlockAutoSlideshow:!1,isInFocus:!1},this.lastCurrentItem=void 0,this.shouldCreateSlideShowPlayButton=!1,this.skipFromSlide=Math.round(1.5*this.props.totalItemsCount)}isFirstItem(){return 0===this.state.activeIndex}isScrollStart(){return!(this.props.options.behaviourParams_gallery_horizontal_slideAnimation!==a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].SCROLL||!this.scrollElement)&&this.scrollPosition()<=1}isScrollEnd(e=this.props){const t=this.props.options.behaviourParams_gallery_horizontal_slideAnimation;return!this.props.options.behaviourParams_gallery_horizontal_loop&&t!==a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].FADE&&t!==a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].DECK&&(this.isAllItemsLoaded()&&this.scrollPositionAtTheAndOfTheGallery()>=Math.floor(this.getScrollElementWidth(e)))}isAllItemsLoaded(){const{totalItemsCount:e,getVisibleItems:t,galleryStructure:i,container:o,isPrerenderMode:r}=this.props;return t(i.galleryItems,o,r).length>=e}getScrollElementWidth(e=this.props){const{galleryStructure:t}=e;return t.width-this.props.options.layoutParams_structure_itemSpacing/2}isFirstItemFullyVisible(){return!this.props.options.behaviourParams_gallery_horizontal_loop&&this.isScrollStart()}isLastItemFullyVisible(){return!this.props.options.behaviourParams_gallery_horizontal_loop&&this.isScrollEnd()}isLastItem(e=this.props){var t;const i=null!==(t=null==e?void 0:e.activeIndex)&&void 0!==t?t:this.state.activeIndex;return!this.props.options.behaviourParams_gallery_horizontal_loop&&i>=this.props.totalItemsCount-1}shouldBlockNext({scrollingUpTheGallery:e}){return e&&this.isLastItem()||!e&&this.isFirstItem()}shouldNotAllowScroll({scrollingUpTheGallery:e}){return e&&this.isLastItemFullyVisible()||!e&&this.isFirstItemFullyVisible()}async nextWithEffects(e){const t=await this.next(e);if(1===this.props.options.layoutParams_groups_groupSize&&this.props.isScrollLessGallery&&t>=this.skipFromSlide){const e=this.skipFromSlide-this.props.totalItemsCount;(e=>{const t=e=>{console.log("toggleScrollLessAnimation: ",e),[".gallery-item-wrapper",".gallery-item-common-info-outer"].forEach((t=>{e?[...document.querySelectorAll(t)].forEach((e=>{var t;null===(t=e.classList)||void 0===t||t.add("disabled-transition")})):[...document.querySelectorAll(t)].forEach((e=>{var t;e.offsetHeight,null===(t=e.classList)||void 0===t||t.remove("disabled-transition")}))}))};setTimeout((()=>{e&&e(),t(!0),t(!1)}),600)})((()=>this.onScrollToItemOrGroup(e,!1)))}}async next({direction:e,isAutoTrigger:t,scrollDuration:i,isKeyboardNavigation:o=!1,isContinuousScrolling:r=!1}){var s;const n=this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?e<=-1:e>=1;if(this.shouldBlockNext({scrollingUpTheGallery:n}))return void this.clearAutoSlideshowInterval();e*=this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?-1:1;const l=document.activeElement,h=l.className&&l.className.includes("gallery-item-container"),u=!o||!((null===(s=this.props.settings)||void 0===s?void 0:s.isAccessible)&&h);let d=!1;return this.props.options.behaviourParams_gallery_horizontal_slideAnimation!==a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].SCROLL&&(i=0,d=!0),this.removeArrowsIfNeeded(),u&&this.props.options.layoutParams_groups_groupSize>1?this.nextGroup({direction:e,scrollDuration:i,isContinuousScrolling:r,scrollingUpTheGallery:n}):(u&&a.A.isLayout("GRID")(this.props.options)&&this.props.options.layoutParams_structure_numberOfGridRows&&(e*=this.props.options.layoutParams_structure_numberOfGridRows),this.nextItem({direction:e,isAutoTrigger:t,scrollDuration:i,avoidIndividualNavigation:u,ignoreScrollPosition:d,isContinuousScrolling:r,scrollingUpTheGallery:n}))}getNextItemOrGroupToScrollTo(e,t,i,o,r){let s;if(this.isSliding=!0,"nextGroup"!==e&&("nextItem"!==e||i||!o||this.props.options.layoutParams_groups_groupSize>1))"nextItem"===e&&(s=i||!r?this.state.activeIndex:this.setCurrentItemByScroll(),s+=t,this.props.options.behaviourParams_gallery_horizontal_loop||(s=Math.min(this.props.galleryStructure.items.length-1,s),s=Math.max(0,s)));else{const i="nextGroup"===e?"groups":"galleryItems";s=this.getCenteredItemOrGroupIdxByScroll(i)+t}return this.isAutoScrolling=!0,s}async nextItem({direction:e,isAutoTrigger:t,scrollDuration:i,avoidIndividualNavigation:o,ignoreScrollPosition:r,isContinuousScrolling:s,scrollingUpTheGallery:a}){if(this.isSliding)return;let l=this.getNextItemOrGroupToScrollTo("nextItem",e,r,o,t);try{const e=r?0:l;return await this.scrollToItemOrGroup(this.props.actions.scrollToItem,e,s,i,a),1!==this.props.options.layoutParams_groups_groupSize||this.props.isScrollLessGallery||l>=this.skipFromSlide&&(l=n.A.inRange(l,this.props.totalItemsCount),await this.props.actions.scrollToItem(l)),this.onScrollToItemOrGroup(l,s),r&&(this.props.getMoreItemsIfNeeded(this.props.galleryStructure.galleryItems[l].offset.left),this.props.setGotFirstScrollIfNeeded()),l}catch(e){this.onThrowScrollError("Cannot proceed to the next Item",e)}}async nextGroup({direction:e,scrollDuration:t,isContinuousScrolling:i=!1,scrollingUpTheGallery:o}){if(this.isSliding)return;const r=this.getNextItemOrGroupToScrollTo("nextGroup",e);try{await this.scrollToItemOrGroup(this.props.actions.scrollToGroup,r,i,t,o);const s=this.getCenteredItemOrGroupIdxByScroll("galleryItems")+e;this.onScrollToItemOrGroup(s,i)}catch(e){this.onThrowScrollError("Cannot proceed to the next Group",e)}}async scrollToItemOrGroup(e,t,i,o,r){const s=!this.shouldNotAllowScroll({scrollingUpTheGallery:r}),{scrollMarginCorrection:a,_scrollDuration:n}=this.getScrollParameters(o);s&&await e(t,!1,!0,n,a,i)}onThrowScrollError(e,t){console.error(e,t),this.clearAutoSlideshowInterval()}onScrollToItemOrGroup(e,t){n.A.setStateAndLog(this,"Next Item",{activeIndex:e},(()=>{this.onCurrentItemChanged(),this.isSliding=!1,t&&this.startAutoSlideshowIfNeeded(this.props.options)}))}getScrollParameters(e){var t;return{scrollMarginCorrection:this.getStyles().margin||0,_scrollDuration:null!==(t=null!=e?e:this.props.options.behaviourParams_gallery_horizontal_navigationDuration)&&void 0!==t?t:400}}onCurrentItemChanged(e=this.props){if(this.lastCurrentItem!==this.state.activeIndex){this.lastCurrentItem=this.state.activeIndex;const e=this.props.galleryStructure.galleryItems[this.state.activeIndex],t=this.props.items[this.state.activeIndex];t&&(t.idx=this.state.activeIndex,t.resizedImageSrc=e.createUrl(a.A.urlSizes.RESIZED,a.A.urlTypes.HIGH_RES),this.props.actions.eventsListener(a.A.events.CURRENT_ITEM_CHANGED,t)),this.navigationPanelCallbackOnIndexChange(this.state.activeIndex)}this.removeArrowsIfNeeded(e)}clearAutoSlideshowInterval(){clearInterval(this.autoSlideshowInterval)}canStartAutoSlideshow(e){return e.behaviourParams_gallery_horizontal_autoSlide_behaviour!==a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].OFF&&!this.state.shouldBlockAutoSlideshow}startAutoSlideshowIfNeeded(e){this.clearAutoSlideshowInterval(),this.canStartAutoSlideshow(e)&&(e.behaviourParams_gallery_horizontal_autoSlide_behaviour===a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].CONTINUOUS&&e.behaviourParams_gallery_horizontal_autoSlide_speed>0?this.autoScrollToNextItem():e.behaviourParams_gallery_horizontal_autoSlide_behaviour===a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].INTERVAL&&e.behaviourParams_gallery_horizontal_autoSlide_interval>0&&(this.autoSlideshowInterval=setInterval(this.autoScrollToNextItem,1e3*e.behaviourParams_gallery_horizontal_autoSlide_interval)))}getFirstIdx(e){const{galleryItems:t}=this.props.galleryStructure,i=t[e].itemId;return t.find((e=>e.itemId===i)).idx}scrollToThumbnail(e,t){this.props.actions.eventsListener(a.A.events.THUMBNAIL_CLICKED,this.props);const i=this.state.activeIndex,o=i+(this.getFirstIdx(e)-this.getFirstIdx(i));this.scrollToIndex({itemIdx:o,scrollDuration:t})}scrollToIndex({itemIdx:e,scrollDuration:t}){this.props.setGotFirstScrollIfNeeded();const i=this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?this.state.activeIndex-e:e-this.state.activeIndex;return this.next({direction:i,isAutoTrigger:!1,scrollDuration:t,isKeyboardNavigation:!1})}handleSlideshowKeyPress(e){e.stopPropagation();const t=e.charCode||e.keyCode;if(!1===[32,33,34,37,38,39,40,27].includes(t))return!0;e.preventDefault();const i=h.A.document.activeElement.getAttribute("data-idx"),o=i&&this.props.totalItemsCount-1===Number(i)&&Number(i)===this.state.activeIndex;if(40===t&&o||27===t){const e={27:this.props.galleryContainerRef,40:this.props.outOfViewComponent}[t];n.A.focusGalleryElement(e)}else this._next({direction:xe(t),isKeyboardNavigation:!0});return!1}getCenteredItemOrGroupIdxByScroll(e){const t=this.props.galleryStructure[e];let i;const o=this.scrollPositionAtTheMiddleOfTheGallery();if(0===o)i=0;else for(let r,s=0;r=t[s];s++){if(("galleryItems"===e?r.offset.left:r.left)>o){i=s-1;break}}return i>=0||(i=t.length-1),i}setCurrentItemByScroll(){if(n.A.isVerbose()&&console.log("Setting current Idx by scroll",this.isAutoScrolling),this.isAutoScrolling)return void(this.isAutoScrolling=!1);if("true"===(this.scrollElement&&this.scrollElement.getAttribute("data-scrolling")))return void this.clearAutoSlideshowInterval();this.startAutoSlideshowIfNeeded(this.props.options);const e=this.getCenteredItemOrGroupIdxByScroll("galleryItems");return n.A.isUndefined(e)||n.A.setStateAndLog(this,"Set Current Item",{activeIndex:e},(()=>{this.onCurrentItemChanged()})),e}createDebugMsg(){return s().createElement(p,Object.assign({},this.props.debug))}createNavArrows(){const{container:e,options:t,customComponents:i,id:o}=this.props,{hideLeftArrow:r,hideRightArrow:a}=this.state;return s().createElement(Ee,{container:e,options:t,customNavArrowsRenderer:i.customNavArrowsRenderer,hideLeftArrow:r,hideRightArrow:a,next:this._next,id:o})}getBufferedItems(e,t){var i;const{state:o,props:r}=this,{options:s,virtualizationSettings:n,getVisibleItems:l,isPrerenderMode:h}=r,{activeIndex:u}=o;return function({groups:e,options:t,virtualizationSettings:i,galleryWidth:o,galleryHeight:r,activeIndex:s}){const{enabled:n=!1,forwardItemMargin:l=3,backwardItemMargin:h=3,forwardItemScrollMargin:u=10,backwardItemScrollMargin:d=10}=i||{},m=t[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL,p=!m||t[c.A.behaviourParams.gallery.horizontal.slideAnimation]===a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].SCROLL;if(!n)return e.map((e=>({group:e,shouldRender:!0})));const g=m?o:r,y=m?"width":"height",v=p?u:l,A=p?d:h,b=e.findIndex((e=>{var t,i;const{items:o}=e,r=o[0],a=o[o.length-1],n=null!==(t=r.idx)&&void 0!==t?t:r.fullscreenIdx,l=null!==(i=a.idx)&&void 0!==i?i:a.fullscreenIdx;return n<=s&&l>=s})),f=e[b],I=f[y]/g;let P=I,S=I;const w=[f];for(let t=1;P<v||S<A;t++){const i=e[b+t],o=e[b-t];if(i&&P<v&&(P+=i[y]/g,w.push(i)),o&&S<A&&(S+=o[y]/g,w.push(o)),!o&&!i)break}return e.map((e=>({group:e,shouldRender:w.includes(e)})))}({groups:l(e,t,h),activeIndex:u,galleryWidth:(null===(i=this.props.galleryContainerRef)||void 0===i?void 0:i.clientWidth)||t.galleryWidth||0,options:s,virtualizationSettings:n})}createGalleryConfig(){return{scrollingElement:this.props.scrollingElement,scroll:this.props.scroll,container:this.props.container,options:this.props.options,settings:this.props.settings,activeIndex:this.state.activeIndex,customComponents:this.props.customComponents,galleryId:this.props.id,gotFirstScrollEvent:this.props.gotFirstScrollEvent,playingVideoIdx:this.props.playingVideoIdx,playing3DIdx:this.props.playing3DIdx,noFollowForSEO:this.props.noFollowForSEO,isPrerenderMode:this.props.isPrerenderMode,firstUserInteractionExecuted:this.props.firstUserInteractionExecuted,enableExperimentalFeatures:this.props.enableExperimentalFeatures,actions:{eventsListener:this.props.actions.eventsListener},totalItemsCount:this.props.totalItemsCount,totalWidth:this.props.galleryStructure.width}}createLayout(){const{container:e,galleryStructure:t}=this.props,i=this.createGalleryConfig(),o=t=>{const o=!!t.galleryGroups.length&&this.getBufferedItems(t.galleryGroups,e);if(o)return o.map((({group:e,shouldRender:t})=>!!e.rendered&&s().createElement(Q,Object.assign(Object.assign({activeIndex:this.state.activeIndex,slideAnimation:this.props.options.behaviourParams_gallery_horizontal_slideAnimation,allowLoop:this.props.options.behaviourParams_gallery_horizontal_loop&&this.props.galleryStructure.width>this.props.container.width},e.renderProps(i)),{ariaHidden:e.idx>this.skipFromSlide,shouldRenderEmpty:!t,container:this.props.container,key:e.idx}))))};return t.columns.map(((e,t)=>{const i={width:this.props.isPrerenderMode?"100%":e.width,height:this.getDimensions().height,overflowY:this.props.isPrerenderMode?"visible":"hidden"};return s().createElement("div",{"data-hook":"gallery-column",id:`gallery-horizontal-scroll-${this.props.id}`,className:`gallery-horizontal-scroll gallery-column hide-scrollbars ${this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?" rtl ":" ltr "} ${this.props.options.behaviourParams_gallery_horizontal_enableScrollSnap?" scroll-snap ":""} `,key:"column"+t,style:i},s().createElement("div",{className:"gallery-horizontal-scroll-inner"},o(e)))}))}getDimensions(){const e=this.props.container.galleryHeight;return this.props.isPrerenderMode?{width:"100%",height:e}:{height:e,width:this.props.container.galleryWidth}}createGallery(){var e;const t=this.props.options.layoutParams_structure_scrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&this.props.options.layoutParams_navigationArrows_position===a.A[c.A.layoutParams.navigationArrows.position].OUTSIDE_GALLERY?{overflow:"visible",left:this.props.options.layoutParams_navigationArrows_size+40+this.props.options.layoutParams_structure_itemSpacing/2}:{},i=this.getDimensions(),o=Object.assign(Object.assign(Object.assign({},i),t),{display:"flex",justifyContent:"space-between"});return s().createElement("div",{id:this.props.galleryContainerId,className:"pro-gallery inline-styles one-row hide-scrollbars "+(this.props.options.behaviourParams_gallery_horizontal_blockScroll?"":" slider ")+((null===(e=this.props.settings)||void 0===e?void 0:e.isAccessible)?" accessible ":"")+(this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?" rtl ":" ltr "),style:o},this.createDebugMsg(),this.createLayout(),this.createAutoSlideShowPlayButton(),this.createSlideShowNumbers(),Pe({options:this.props.options,container:this.props.container,isPrerenderMode:this.props.isPrerenderMode,galleryStructure:this.props.galleryStructure,customNavArrowsRenderer:this.props.customComponents.customNavArrowsRenderer})&&this.createNavArrows())}onAutoSlideShowButtonClick(){this.setState({pauseAutoSlideshowClicked:!this.state.pauseAutoSlideshowClicked},(()=>{this.updateAutoSlideShowState(this.props)}))}isFullWidthGallery(){return this.props.container.galleryWidth>=n.A.getWindowWidth()-10}onAutoSlideshowAutoPlayKeyPress(e){switch(e.keyCode||e.charCode){case 32:case 13:return e.preventDefault(),e.stopPropagation(),this.onAutoSlideShowButtonClick(),!1;default:return!0}}calcSlideshowCounterWidth(){const{totalItemsCount:e}=this.props;return e<10?26:e<100?43:e<1e3?60:76}createAutoSlideShowPlayButton(){if(!this.shouldCreateSlideShowPlayButton)return!1;const e=this.props.options.behaviourParams_gallery_horizontal_slideshowInfo_buttonsAlignment,t=this.props.options.layoutParams_structure_itemSpacing/2+(this.isFullWidthGallery()?50:0),i=e===a.A[c.A.behaviourParams.gallery.horizontal.slideshowInfo.buttonsAlignment].RIGHT?{left:t/2+"px"}:{right:`${t/2+(this.props.options.behaviourParams_gallery_horizontal_slideshowInfo_enableCounter?this.calcSlideshowCounterWidth():0)}px`};return s().createElement("button",{className:"auto-slideshow-button",onClick:()=>{this.onAutoSlideShowButtonClick()},onKeyDown:this.onAutoSlideshowAutoPlayKeyPress,"data-hook":"auto-slideshow-button",title:"slideshow auto play","aria-pressed":this.state.pauseAutoSlideshowClicked,tabIndex:0,style:Object.assign({top:`calc(100% - ${this.props.options.layoutParams_info_height}px + 3px)`},i)},this.state.pauseAutoSlideshowClicked?s().createElement(ie,{width:"10px",height:"100%"}):s().createElement(re,{width:"10px",height:"100%"}))}createSlideShowNumbers(){if(!this.props.options.behaviourParams_gallery_horizontal_slideshowInfo_enableCounter)return!1;const{totalItemsCount:e}=this.props,t=this.props.options.behaviourParams_gallery_horizontal_slideshowInfo_buttonsAlignment,i=this.props.options.layoutParams_structure_itemSpacing/2+(this.isFullWidthGallery()?50:0),o=this.shouldCreateSlideShowPlayButton?i/2+25:i/2,r=t===a.A[c.A.behaviourParams.gallery.horizontal.slideshowInfo.buttonsAlignment].RIGHT?{left:`${o}px`}:{right:i/2+"px"};return s().createElement("div",{className:"auto-slideshow-counter","data-hook":"auto-slideshow-counter",style:Object.assign({top:`calc(100% - ${this.props.options.layoutParams_info_height}px + 3px)`},r)},s().createElement("div",null,this.state.activeIndex%e+1+"/"+e))}getNavigationPanelArray(){if(!this.props.options.layoutParams_thumbnails_enable)return[!1,!1];const e=this.getCustomNavigationPanel();let t;if(e){const{galleryHeight:i,galleryWidth:o,height:r,width:a}=this.props.container,n=(({galleryHeight:e,galleryWidth:t,height:i,width:o,galleryThumbnailsAlignment:r,navigationPanelPosition:s})=>Object.assign(Object.assign(Object.assign({},ge({galleryHeight:e,galleryWidth:t,height:i,width:o,galleryThumbnailsAlignment:r,navigationPanelPosition:s})),ye({galleryThumbnailsAlignment:r,navigationPanelPosition:s})),{overflow:"hidden",float:"left"}))({galleryHeight:i,galleryWidth:o,height:r,width:a,galleryThumbnailsAlignment:this.props.options.layoutParams_thumbnails_alignment,navigationPanelPosition:this.props.options.layoutParams_thumbnails_position});t=t=>s().createElement("div",{className:"custom-navigation-panel",style:n},e(Object.assign(Object.assign({},this.props),{domOrder:t,activeIndex:this.state.activeIndex,navigationToIdxCB:this.scrollToThumbnail,navigationPanelAPI:this.createOrGetCustomNavigationPanelAPI()})))}else t=e=>s().createElement(ve,Object.assign({},this.props,{domOrder:e,activeIndex:this.state.activeIndex,navigationToIdxCB:this.scrollToThumbnail}));const i=[];if(this.props.options.layoutParams_thumbnails_position===a.A[c.A.layoutParams.thumbnails.position].ON_GALLERY)return i[0]=!1,i[1]=t("after"),i;if(this.props.isPrerenderMode)return i[0]=t("before"),i[1]=t("after"),i;switch(this.props.options.layoutParams_thumbnails_alignment){case a.A[c.A.layoutParams.thumbnails.alignment].TOP:case a.A[c.A.layoutParams.thumbnails.alignment].LEFT:i[0]=t("before"),i[1]=!1;break;case a.A[c.A.layoutParams.thumbnails.alignment].RIGHT:case a.A[c.A.layoutParams.thumbnails.alignment].BOTTOM:i[0]=!1,i[1]=t("after")}return i}getClassNames(){let e="pro-gallery-parent-container";return a.A.isLayout("SLIDER")(this.props.options)?e+=" gallery-slider":this.props.options.layoutParams_thumbnails_enable?e+=" gallery-thumbnails":a.A.isLayout("COLUMN")(this.props.options)&&(e+=" gallery-columns"),e}getStyles(){return{margin:-1*(this.props.options.layoutParams_structure_itemSpacing/2-this.props.options.layoutParams_structure_gallerySpacing),width:this.props.container.width,height:this.props.container.height}}getScrollPosition(){return this.scrollElement?this.scrollPosition():0}scrollPositionAtTheMiddleOfTheGallery(){return this.getScrollPosition()+this.props.container.galleryWidth/2}scrollPositionAtTheAndOfTheGallery(){return this.getScrollPosition()+this.props.container.galleryWidth}scrollPosition(){return(this.props.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT?-1:1)*this.scrollElement.scrollLeft}updateAutoSlideShowState(e=this.props){const{isGalleryInHover:t,options:i,settings:o}=e,{pauseAutoSlideshowClicked:r,shouldBlockAutoSlideshow:s,isInView:a,isInFocus:n}=this.state,l=t&&i.behaviourParams_gallery_horizontal_autoSlide_pauseOnHover,h=n&&(null==o?void 0:o.isAccessible);let c=!a||r||h||l;s!==c&&this.setState({shouldBlockAutoSlideshow:c},(()=>{this.startAutoSlideshowIfNeeded(i)}))}onFocus(){this.setState({isInFocus:!0},(()=>{this.updateAutoSlideShowState(this.props)}))}onBlur(){this.setState({isInFocus:!1},(()=>{this.updateAutoSlideShowState(this.props)}))}UNSAFE_componentWillReceiveProps(e){var t,i;const o=e.isInViewport&&(null===(t=e.isInDisplay)||void 0===t||t);o!==(this.props.isInViewport&&(null===(i=this.props.isInDisplay)||void 0===i||i))?this.setState({isInView:o},(()=>{this.updateAutoSlideShowState(e)})):this.props.isGalleryInHover!==e.isGalleryInHover?this.updateAutoSlideShowState(e):this.props.container.scrollBase!=e.container.scrollBase&&this.forceUpdate((()=>{this.startAutoSlideshowIfNeeded(e.options)})),this.props.activeIndex!==e.activeIndex&&n.A.setStateAndLog(this,"Next Item",{activeIndex:e.activeIndex},(()=>{this.onCurrentItemChanged(e)})),this.props.totalItemsCount===e.totalItemsCount&&this.props.container.galleryHeight===e.container.galleryHeight&&this.props.container.galleryWidth===e.container.galleryWidth&&this.state.activeIndex===e.activeIndex||this.removeArrowsIfNeeded(e),((0,u.Q)()||(0,u.IL)())&&(this.props.options.behaviourParams_gallery_horizontal_autoSlide_behaviour!==a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].OFF!==e.options.behaviourParams_gallery_horizontal_autoSlide_behaviour===a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].OFF&&this.props.options.behaviourParams_gallery_horizontal_autoSlide_interval===e.options.behaviourParams_gallery_horizontal_autoSlide_interval||this.startAutoSlideshowIfNeeded(e.options)),this.shouldCreateSlideShowPlayButton=e.options.behaviourParams_gallery_horizontal_autoSlide_behaviour!==a.A[c.A.behaviourParams.gallery.horizontal.autoSlide.behaviour].OFF&&e.options.behaviourParams_gallery_horizontal_slideshowInfo_enablePlayButton}removeArrowsIfNeeded(e=this.props){const t=e.options.behaviourParams_gallery_layoutDirection===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,{hideLeftArrow:i,hideRightArrow:o}=this.state,r=this.isScrollStart(),s=this.isFirstItem(),n=this.isScrollEnd(e),l=this.isLastItem(e),h=r||s,u=n||l,d=!t&&h||t&&u,m=t&&h||!t&&u;(!!d!=!!i||!!m!=!!o)&&this.setState({hideLeftArrow:!!d,hideRightArrow:!!m})}componentDidMount(){this.scrollElement=h.A.document.querySelector(`#pro-gallery-${this.props.id} #gallery-horizontal-scroll-${this.props.id}`),this.scrollElement&&this.scrollElement.addEventListener("scroll",this._setCurrentItemByScroll),this.state.activeIndex>0?(this.props.actions.scrollToItem(this.state.activeIndex),this.onCurrentItemChanged()):this.setCurrentItemByScroll(),this.startAutoSlideshowIfNeeded(this.props.options),this.createOrGetCustomNavigationPanelAPI()}componentWillUnmount(){this.scrollElement&&this.scrollElement.removeEventListener("scroll",this._setCurrentItemByScroll)}render(){n.A.isVerbose()&&(console.count("galleryView render"),console.count("Rendering Gallery count"),console.time("Rendering Gallery took "));const e=this.createGallery(),t=this.getNavigationPanelArray();return n.A.isVerbose()&&console.timeEnd("Rendering Gallery took "),s().createElement("div",Object.assign({className:this.getClassNames(),style:this.getStyles(),onKeyDown:this.handleSlideshowKeyPress},n.A.getAriaAttributes({proGalleryRole:this.props.proGalleryRole,proGalleryRegionLabel:this.props.proGalleryRegionLabel}),{onFocus:this.onFocus,onBlur:this.onBlur}),t[0],e,t[1])}}const Re=Le;class Me{constructor(){this.promise=new Promise(((e,t)=>{this.reject=(...e)=>{this.isPending=!1,t(...e)},this.resolve=(...t)=>{this.isPending=!1,e(...t)},this.isPending=!0}))}}function _e({scroller:e,from:t,to:i,duration:o,isRTL:r,slideTransition:s,isContinuousScrolling:a,autoSlideshowContinuousSpeed:n}){let l=i-t;if(0===l)return new Promise((e=>e(i)));a&&(o=Math.abs(l)/n*1e3);const h=e.firstChild;e.setAttribute("data-scrolling","true"),Object.assign(e.style,{"scroll-snap-type":"none"}),Object.assign(h.style,{transition:`transform ${o}ms ${s}`,"-webkit-transition":`transform ${o}ms ${s}`},{transform:`translateX(${-1*l}px)`});const c=new CustomEvent("scrollTransition",{detail:l/10}),u=setInterval((()=>{e.dispatchEvent(c)}),Math.round(o/10));let d=new Me;const m=setTimeout((()=>{clearInterval(u),Object.assign(h.style,{transition:"none","-webkit-transition":"none"},{transform:"translateX(0px)"}),e.style.removeProperty("scroll-snap-type"),e.scrollLeft=i,e.setAttribute("data-scrolling",""),d.resolve(i)}),o);return{scrollDeffered:d,scroller:e,from:t,to:i,duration:o,isRTL:r,slideTransition:s,isContinuousScrolling:a,autoSlideshowContinuousSpeed:n,currentScrollEndTimeout:m}}function He({scroller:e,from:t,isRTL:i,currentScrollEndTimeout:o,scrollDeffered:r}){clearTimeout(o);const s=e.firstChild;let a=getComputedStyle(s).getPropertyValue("transform");var n=new DOMMatrix(a);(function({scroller:e,at:t,isRTL:i}){Object.assign(e.style,{"scroll-snap-type":"none"});let o=new Me;Object.assign(e.firstChild.style,{transition:"none","-webkit-transition":"none"},{transform:"translateX(0px)"}),e.scrollLeft=t,o.resolve(t)})({scroller:e,at:t-=Math.round(parseInt(n.m41,10)),isRTL:i}),r.resolve(t)}class De extends s().Component{constructor(e){super(),this.state={scrollTop:0,scrollLeft:0},this.debouncedOnScroll=n.A.debounce(e.onScroll,50)}removeScrollListener(){if(this.scrollEventListenerSet){const e=this.props.scrollingElement;try{e.vertical().removeEventListener("scroll",this.onVerticalScroll)}catch(e){}try{const{scrollDirection:t}=this.props;t===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&e.horizontal().removeEventListener("scroll",this.onHorizontalScroll)}catch(e){}this.scrollEventListenerSet=!1}}initScrollListener(){var e,t;this.scrollEventListenerSet&&this.removeScrollListener(),this.scrollEventListenerSet=!0;const i=this.props.scrollingElement;if(this.onHorizontalScrollTransition=({detail:e})=>{const t=Math.round(e);t>=0&&this.props.galleryScrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&this.setState({scrollLeft:this.state.scrollLeft+t})},this.onHorizontalScroll=e=>{var t,i;this.props.setGotFirstScrollIfNeeded();const o=e.currentTarget||e.target||e;let r=o&&(null!==(i=null!==(t=o.scrollX)&&void 0!==t?t:o.scrollLeft)&&void 0!==i?i:o.x);this.props.isRTL&&(r=Math.abs(r)),r>=0&&this.props.galleryScrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&(this.setState({scrollTop:r,scrollLeft:r}),this.props.getMoreItemsIfNeeded(r),this.debouncedOnScroll({left:r}))},this.props.galleryScrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL)try{null===(e=null==i?void 0:i.horizontal())||void 0===e||e.addEventListener("scroll",this.onHorizontalScroll),null===(t=null==i?void 0:i.horizontal())||void 0===t||t.addEventListener("scrollTransition",this.onHorizontalScrollTransition)}catch(e){console.error(e)}this.onVerticalScroll=e=>{this.props.setGotFirstScrollIfNeeded();const t=e.currentTarget||e.target||e,i=t&&(t.scrollY||t.scrollTop||t.y);i>=0&&(this.props.galleryScrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].VERTICAL&&(this.setState({scrollTop:i}),this.props.getMoreItemsIfNeeded(i)),this.debouncedOnScroll({top:i}))};try{i.vertical().addEventListener("scroll",this.onVerticalScroll)}catch(e){console.error(e)}}componentWillUnmount(){this.removeScrollListener()}componentDidMount(){this.initScrollListener()}UNSAFE_componentWillReceiveProps(e){let t=!1;for(const i of["id","scrollDirection","isRTL","totalWidth","scrollBase"])if(e[i]!==this.props[i]){t=!0;break}t&&this.initScrollListener()}render(){const e=this.props.galleryScrollDirection===a.A[c.A.layoutParams.structure.scrollDirection].VERTICAL&&this.props.scrollBase>0?this.props.scrollBase:0,t=this.state.scrollTop-e,{id:i}=this.props;return s().createElement("div",{key:"css-scroll-indicator","data-hook":"css-scroll-indicator","data-scroll-base":e,"data-scroll-top":this.state.scrollTop,className:M.calcScrollClasses(i,t),style:{display:"none"}})}}const Ne=(e="",t,i)=>{const o=i[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT;let r="";return t.forEach((t=>{const i=(({galleryId:e,item:t})=>`#pro-gallery-${e} #${M.getSellectorDomId(t)}`)({galleryId:e,item:t}),s=(e=>({top:e.offset.top,left:e.offset.left,width:e.width+e.infoWidth,height:e.height+e.infoHeight,innerHeight:e.height}))(t),a=`top:${s.top}px;`,n=o?`right:${s.left}px;left:auto;`:`left:${s.left}px;`,l=`width:${s.width}px;`,h=`height:${s.height}px;`;r+=`${i} {${a}${n}${l}${h}}`})),r};const ke=class{constructor(e){this.config=e,this.scrollHelpers=[],this.stop=e=>{for(const t of this.scrollHelpers)t.findItem(e)&&t.stop(e)},this.initializePlayState=()=>{for(const e of this.scrollHelpers)e.initializePlayState()},this.onScroll=({top:e,left:t})=>{this.scrollHelpers.length||(this.top=e||this.top,this.left=t||this.left);for(const i of this.scrollHelpers)i.onScroll({top:e,left:t})},this.handleEvent=e=>{for(const t of this.scrollHelpers)t.handleEvent(e)},this.updateGalleryStructure=e=>{if(!e.isSSR){for(const t of this.scrollHelpers)t.updateGalleryStructure(e);this.scrollHelperPromise?this.latestGalleryStructure=e:(this.latestGalleryStructure=e,(0,u.Q)()||e.galleryStructure.galleryItems.some((e=>this.config.some((t=>t.supportedItemsFilter(e)))))&&(this.scrollHelperPromise=Promise.all([i.e(7891),i.e(5622),i.e(9143),i.e(4313)]).then(i.bind(i,7750)).then((({default:e})=>{for(const t of this.config)this.scrollHelpers.push(new e(t.onSetPlayingIdx,t.supportedItemsFilter,t.getPlayTrigger));this.updateGalleryStructure(this.latestGalleryStructure),this.onScroll({top:this.top,left:this.left})})).catch((e=>{console.error("Failed to load videoScrollHelper. error: "+e)}))))}},this.left=0,this.top=0}};const Ge=function(e,t,i){const o=i[e];let r;const s=(e,t,o)=>{let r,s,a,n=null,l={};return i.forEach((i=>{r=i.offset.top+i.height/2,s=i.offset.left+i.width/2,a=Math.sqrt(Math.pow(r-t,2)+Math.pow(s-e,2)),(null===n||a>0&&a<n)&&o(e,t,s,r)&&(n=a,l=i)})),l};switch(t){case"up":r=s(o.offset.left+o.width/2,o.offset.top,((e,t,i,o)=>o<t));break;case"left":r=s(o.offset.left,o.offset.top+o.height/2,((e,t,i)=>i<e));break;case"down":r=s(o.offset.left+o.width/2,o.offset.bottom,((e,t,i,o)=>o>t));break;default:r=s(o.offset.right,o.offset.top+o.height/2,((e,t,i)=>i>e))}return r.idx>=0?r.idx:(console.warn("Could not find offset for itemIdx",e,t),e)};class ze extends s().Component{constructor(e){super(e),this.updateVisibility=()=>{const e=function({container:e,scrollTop:t}){try{const i=e.scrollBase<t+h.A.innerHeight,o=e.scrollBase+e.galleryHeight>t;return i&&o}catch(e){return console.warn("Could not calculate viewport",e),!0}}({container:this.props.container,scrollTop:this.state.scrollPosition.top});this.state.isInViewport!==e&&this.setState({isInViewport:e})},this.setVisibilityIfNeeded=(e,t)=>{const{container:i}=this.props,{scrollPosition:o}=this.state;i.scrollBase===e.container.scrollBase&&o.top===t.scrollPosition.top||this.updateVisibility()},this.findNeighborItem=(e,t)=>Ge(e,t,this.state.structure.items),n.A.isVerbose()&&console.count("[OOISSR] galleryContainer constructor",h.A.isMock),this.getMoreItemsIfNeeded=this.getMoreItemsIfNeeded.bind(this),this.setGotFirstScrollIfNeeded=this.setGotFirstScrollIfNeeded.bind(this),this.toggleLoadMoreItems=this.toggleLoadMoreItems.bind(this),this.scrollToItem=this.scrollToItem.bind(this),this.scrollToGroup=this.scrollToGroup.bind(this),this._scrollingElement=this.getScrollingElement(),this.eventsListener=this.eventsListener.bind(this),this.onGalleryScroll=this.onGalleryScroll.bind(this),this.getVisibleItems=this.getVisibleItems.bind(this),this.findNeighborItem=this.findNeighborItem.bind(this),this.setCurrentSlideshowViewIdx=this.setCurrentSlideshowViewIdx.bind(this),this.getIsScrollLessGallery=this.getIsScrollLessGallery.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.mediaScrollHelper=new ke([{getPlayTrigger:e=>e.behaviourParams_item_video_playTrigger,onSetPlayingIdx:e=>this.setState({playingVideoIdx:e}),supportedItemsFilter:e=>"video"===e.type||"image"===e.type&&(e.id.includes("_placeholder")||e.isVideoPlaceholder)},{getPlayTrigger:e=>e.behaviourParams_item_threeDimensionalScene_playTrigger,onSetPlayingIdx:e=>this.setState({playing3DIdx:e}),supportedItemsFilter:e=>"3d"===e.type}]);const t={scrollPosition:{top:0,left:0},showMoreClickedAtLeastOnce:!1,initialGalleryHeight:void 0,needToHandleShowMoreClick:!1,gotFirstScrollEvent:e.activeIndex>=0,playingVideoIdx:-1,playing3DIdx:-1,viewComponent:null,firstUserInteractionExecuted:!1,isInHover:!1,isInViewport:!0};this.state=t,this.layoutCss=[],this.initialGalleryState={};try{const t=this.propsToState(e);Object.keys(t).length>0&&(this.initialGalleryState=t)}catch(e){console.warn("Cannot create initial state from props",e)}this.state=Object.assign(Object.assign({},t),this.initialGalleryState)}initializeScrollPosition(){if(this.props.activeIndex>0){this.scrollToItem(this.props.activeIndex,!1,!0,0);const e=this.galleryStructure.items[this.props.activeIndex];this.onGalleryScroll(e.offset)}}isScrollingUnavailable(e,t){return this.isVerticalGallery()?e<=t+300:this.state.structure.width<this.state.container.width+300}async getMoreItemsIfScrollIsDisabled(e,t){if(this.isScrollingUnavailable(e,t)){const e=this.state.items.length;this.getMoreItemsIfNeeded(0).then((()=>{if(this.state.items.length>e){const{body:e,documentElement:t}=document,i=h.A.innerHeight,o=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);this.getMoreItemsIfScrollIsDisabled(o,i)}}))}}componentDidMount(){h.C.stopUsingMock();const{body:e,documentElement:t}=document,i=h.A.innerHeight,o=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);this.initializeScrollPosition(),this.getMoreItemsIfScrollIsDisabled(o,i),this.handleNewGalleryStructure(),this.eventsListener(a.A.events.APP_LOADED,{}),this.mediaScrollHelper.initializePlayState();try{"function"==typeof h.A.CustomEvent?this.currentHoverChangeEvent=new CustomEvent("current_hover_change"):(this.currentHoverChangeEvent=h.A.document.createEvent("CustomEvent"),this.currentHoverChangeEvent.initCustomEvent("current_hover_change",!1,!1,null))}catch(e){console.error("could not create 'current_hover_change' customEvent. Error =",e)}this.props.id&&(this.currentHoverChangeEvent.galleryId=this.props.id)}UNSAFE_componentWillReceiveProps(e){!this.currentHoverChangeEvent.galleryId&&e.id&&(this.currentHoverChangeEvent.galleryId=e.id),this.props.activeIndex!==e.activeIndex&&e.activeIndex!==this.currentSlideshowViewIdx&&this.scrollToItem(e.activeIndex,!1,!0,0);const t=()=>{const t=this.propsToState(e);Object.keys(t).length>0&&this.setState(t,this.handleNewGalleryStructure)},i=e=>{const{id:t,options:i,container:o,items:r,isInDisplay:s,isPrerenderMode:a}=e;return{id:t,options:i,container:o,items:r,isInDisplay:s,isPrerenderMode:a}};this.reCreateGalleryTimer&&clearTimeout(this.reCreateGalleryTimer);let o=!0;try{const t=i(this.props),r=i(e);o=JSON.stringify(t)!==JSON.stringify(r),n.A.isVerbose()&&o&&console.log("New props arrived",n.A.printableObjectsDiff(t,r))}catch(e){console.error("Cannot compare props",e)}o&&(t(),this.props.isInDisplay!==e.isInDisplay&&this.handleNavigation(e.isInDisplay))}handleNavigation(e){e||this.mediaScrollHelper.stop()}handleNewGalleryStructure(){const{container:e,needToHandleShowMoreClick:t,initialGalleryHeight:i}=this.state,o="vertical"===this.containerInfiniteGrowthDirection();let r=!1;if(!o&&t){const t=138;r=e.height+(i-t)}const s=this.props.options,l={numOfItems:this.state.items.length,container:e,options:s,layoutHeight:r||this.props.container.height,layoutItems:this.props.structure.items,isInfinite:o,isFixedHorizontlaGalleryRatio:"horizontal"===this.containerInfiniteGrowthDirection()&&this.state.options[c.A.layoutParams.structure.galleryRatio.value]>0,updatedHeight:r};n.A.isVerbose()&&console.log("handleNewGalleryStructure",l),this.eventsListener(a.A.events.GALLERY_CHANGE,l),t&&this.setState({needToHandleShowMoreClick:!1})}isVerticalGallery(){return this.state.options[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].VERTICAL}getIsScrollLessGallery(e){const t=e[c.A.behaviourParams.gallery.horizontal.slideAnimation];return e[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL&&t!==a.A[c.A.behaviourParams.gallery.horizontal.slideAnimation].SCROLL}getVisibleItems(e,t,i){var o,r;const{gotFirstScrollEvent:s}=this.state,a=(null===(r=null===(o=this.state)||void 0===o?void 0:o.scrollPosition)||void 0===r?void 0:r.top)||0,{galleryHeight:n,scrollBase:l,galleryWidth:c}=t;if(i||(0,u.Xf)()||(0,u.Q)()||s||a>0||(0,u.IL)()||this.props.activeIndex>0)return e;let d=e;try{const t=h.A.innerHeight,i=this.isVerticalGallery()&&"vertical"===this.containerInfiniteGrowthDirection()?1/0:l+n,o=a+t,r=Math.min(i,o)-l;d=r<0?[]:this.isVerticalGallery()?e.filter((e=>e.offset.top<r)):e.filter((e=>e.left<=c+20)),d.length<2&&d.length<e.length&&(d=e.slice(0,2))}catch(t){console.error("Could not calculate visible items, returning original items",t),d=e}return d}propsToState({items:e,options:t,structure:i,container:o,id:r,createMediaUrl:s,isPrerenderMode:a}){e=e||this.props.items,t=t||this.props.options,o=o||this.props.container,i=i||this.props.structure,r=r||this.props.id,s=s||this.props.createMediaUrl,this.galleryStructure=d.J.convertToGalleryItems(i,{thumbnailSize:t[c.A.layoutParams.thumbnails.size],sharpParams:t.sharpParams,createMediaUrl:s});!(0,u.Xf)()&&((0,u.Q)()||this.state.gotFirstScrollEvent||this.state.showMoreClickedAtLeastOnce)&&this.getScrollCss({id:r,items:this.galleryStructure.galleryItems,options:t,container:o});const l={galleryStructure:this.galleryStructure,galleryWidth:o.galleryWidth,scrollBase:o.scrollBase,options:t,isSSR:n.A.isSSR()};this.mediaScrollHelper.updateGalleryStructure(l);const h={items:e,container:o,options:t,gotScrollEvent:!0};this.createCssLayoutsIfNeeded(h),this.createDynamicStyles(t[c.A.behaviourParams.item.overlay.backgroundColor],a);return{items:e,options:t,container:o,structure:i}}getScrollingElement(){return{vertical:this.props.scrollingElement?()=>this.props.scrollingElement:()=>h.A,horizontal:()=>h.A.document.querySelector(`#pro-gallery-${this.props.id} #gallery-horizontal-scroll-${this.props.id}`)}}scrollToItem(e,t,i,o=0,r,s=!1){if(e>=0){if(this.state.gotFirstScrollEvent||this.setState({gotFirstScrollEvent:!0}),this.getIsScrollLessGallery(this.state.options))return;const l=this._scrollingElement,h=l.horizontal();try{const u={scrollMarginCorrection:r,isRTL:this.state.options[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,scrollDirection:this.state.options[c.A.layoutParams.structure.scrollDirection],galleryWidth:this.state.container.galleryWidth,galleryHeight:this.state.container.galleryHeight,top:0,items:this.galleryStructure.items,totalWidth:this.galleryStructure.width,itemIdx:e,fixedScroll:t,isManual:i,scrollingElement:l,horizontalElement:h,durationInMS:o,slideTransition:this.state.options[c.A.behaviourParams.gallery.horizontal.slideTransition],isContinuousScrolling:s,autoSlideshowContinuousSpeed:this.state.options[c.A.behaviourParams.gallery.horizontal.autoSlide.speed],itemSpacing:this.state.options[c.A.layoutParams.structure.itemSpacing]};return this.eventsListener(a.A.events.GALLERY_NAVIGATION_START,{current:"scrollToItem",scrollParams:u}),this.currentScrollData=function(e){let t,i;const{scrollMarginCorrection:o=0,durationInMS:r,horizontalElement:s,scrollingElement:l,isRTL:h,scrollDirection:u,galleryWidth:d,galleryHeight:m,totalWidth:p,top:g,items:y,itemIdx:v,fixedScroll:A,slideTransition:b,isContinuousScrolling:f,autoSlideshowContinuousSpeed:I,itemSpacing:P}=e,S=h?-1:1;if(u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?(i=s.scrollLeft*S,t=i+v*d/2):(i=g,t=g+v*m/2),!0!==A){n.A.isVerbose()&&console.log("Scrolling to items #"+v);const e=y.find((e=>e.idx===v));if(t=u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?n.A.get(e,"offset.left"):n.A.get(e,"offset.top"),n.A.isVerbose()&&console.log("Scrolling to position "+t,e),!(t>=0))return n.A.isVerbose()&&console.warn("Position not found, not scrolling"),new Promise((e=>e()));if(u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL){const r=(d-e.width-P)/2;t-=r,t=Math.max(0,t),t=Math.min(t,p-d+o),t*=S,i*=S,n.A.isVerbose()&&console.log("Scrolling to new position "+t,this)}}return u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?_e({scroller:s,from:Math.round(i),to:Math.round(t),duration:r,isRTL:h,slideTransition:b,isContinuousScrolling:f,autoSlideshowContinuousSpeed:I}):new Promise((e=>{l.vertical().scrollTo(0,t),e(t)}))}(u),this.currentScrollData.scrollDeffered.promise.then((()=>{this.currentScrollData=null}))}catch(e){console.error("error:",e," pro-gallery, scrollToItem, cannot get scrollParams, ","isEditMode =",(0,u.Q)()," isPreviewMode =",(0,u.IL)()," isSiteMode =",(0,u.PP)()," this.state.options =",this.state.options," this.state.container =",this.state.container," this.galleryStructure =",this.galleryStructure)}}}scrollToGroup(e,t,i,o=0,r,s=!1){if(e>=0){const l=this._scrollingElement,h=l.horizontal();try{const u={scrollMarginCorrection:r,isRTL:this.state.options[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,scrollDirection:this.state.options[c.A.layoutParams.structure.scrollDirection],galleryWidth:this.state.container.galleryWidth,galleryHeight:this.state.container.galleryHeight,top:0,groups:this.galleryStructure.groups,totalWidth:this.galleryStructure.width,groupIdx:e,fixedScroll:t,isManual:i,scrollingElement:l,horizontalElement:h,durationInMS:o,slideTransition:this.state.options[c.A.behaviourParams.gallery.horizontal.slideTransition],isContinuousScrolling:s,autoSlideshowContinuousSpeed:this.state.options[c.A.behaviourParams.gallery.horizontal.autoSlide.speed],itemSpacing:this.state.options[c.A.layoutParams.structure.itemSpacing]};return this.eventsListener(a.A.events.GALLERY_NAVIGATION_START,{current:"scrollToGroup",scrollParams:u}),this.currentScrollData=function(e){let t,i;const{scrollMarginCorrection:o=0,durationInMS:r,horizontalElement:s,scrollingElement:l,isRTL:h,scrollDirection:u,galleryWidth:d,galleryHeight:m,totalWidth:p,top:g,groups:y,groupIdx:v,fixedScroll:A,slideTransition:b,isContinuousScrolling:f,autoSlideshowContinuousSpeed:I,itemSpacing:P}=e,S=h?-1:1;if(u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?(i=s.scrollLeft,t=i+v*d/2):(i=g,t=g+v*m/2),!0!==A){n.A.isVerbose()&&console.log("Scrolling to groups #"+v);const e=y.find((e=>e.idx===v));if(t=u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?n.A.get(e,"left"):n.A.get(e,"top"),n.A.isVerbose()&&console.log("Scrolling to position "+t,e),!(t>=0))return n.A.isVerbose()&&console.warn("Position not found, not scrolling"),new Promise((e=>e()));if(u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL){const i=(d-e.width-P)/2;t-=i,t=Math.max(0,t),t=Math.min(t,p-d+o),t*=S,n.A.isVerbose()&&console.log("Scrolling to new position "+t,this)}}return u===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?_e({scroller:s,from:Math.round(i),to:Math.round(t),duration:r,isRTL:h,slideTransition:b,isContinuousScrolling:f,autoSlideshowContinuousSpeed:I}):new Promise((e=>{l.vertical().scrollTo(0,t),e(t)}))}(u),this.currentScrollData.scrollDeffered.promise.then((()=>{this.currentScrollData=null}))}catch(e){console.error("error:",e," pro-gallery, scrollToGroup, cannot get scrollParams, ","isEditMode =",(0,u.Q)()," isPreviewMode =",(0,u.IL)()," isSiteMode =",(0,u.PP)()," this.state.options =",this.state.options," this.state.container =",this.state.container," this.galleryStructure =",this.galleryStructure)}}}containerInfiniteGrowthDirection(e=!1){const t=e||this.props.options,{showMoreClickedAtLeastOnce:i}=this.state;return t[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?"horizontal":this.props.options[c.A.behaviourParams.gallery.vertical.loadMore.enable]?i&&t[c.A.behaviourParams.gallery.vertical.loadMore.amount]===a.A[c.A.behaviourParams.gallery.vertical.loadMore.amount].ALL?"vertical":"none":"vertical"}onGalleryScroll(e){this.props.isInDisplay&&this.eventsListener(a.A.events.GALLERY_SCROLLED,e)}componentDidUpdate(e,t){if(this.setVisibilityIfNeeded(e,t),this.props.isPrerenderMode!==e.isPrerenderMode){const{body:e,documentElement:t}=document,i=h.A.innerHeight,o=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight);this.getMoreItemsIfScrollIsDisabled(o,i)}}createDynamicStyles(e,t){const i=t&&!this.props.settings.disableSSROpacity;this.dynamicStyles=`\n      ${i?`#pro-gallery-${this.props.id} .gallery-item-container { opacity: 0 }`:""}\n      ${e?`#pro-gallery-${this.props.id} .gallery-item-hover::before { background: ${e} !important}`:""}\n    `.trim()}createCssLayoutsIfNeeded(e){const{settings:t={}}=this.props,{avoidInlineStyles:i}=t;i&&(this.layoutCss=(({galleryItems:e,layoutParams:t,id:i})=>{const o=[];return o.push(Ne(i,e,t.options)),o})({layoutParams:e,isMobile:n.A.isMobile(),id:this.props.id,galleryItems:this.galleryStructure.galleryItems}))}getScrollCss({id:e,items:t,options:i,container:o}){this.scrollCss=M.calcScrollCss({items:t,options:i,id:e,container:o})}toggleLoadMoreItems(){this.eventsListener(a.A.events.LOAD_MORE_CLICKED,this.galleryStructure.galleryItems);const e=!0;if(this.state.showMoreClickedAtLeastOnce)this.setState({needToHandleShowMoreClick:e},(()=>{this.handleNewGalleryStructure()}));else{this.getScrollCss({id:this.props.id,items:this.galleryStructure.galleryItems,options:this.state.options,container:this.state.container});const t=this.state.container.height;this.setState({showMoreClickedAtLeastOnce:true,initialGalleryHeight:t,needToHandleShowMoreClick:e},(()=>{this.handleNewGalleryStructure()}))}}setGotFirstScrollIfNeeded(){this.state.gotFirstScrollEvent||(this.getScrollCss({id:this.props.id,items:this.galleryStructure.galleryItems,options:this.state.options,container:this.state.container}),this.setState({gotFirstScrollEvent:!0}))}setCurrentSlideshowViewIdx(e){this.currentSlideshowViewIdx=e}simulateHorizontalScrollToItem(e){(null==e?void 0:e.offset)&&this.onGalleryScroll({left:e.offset.left})}eventsListener(e,t,i){if(this.mediaScrollHelper.handleEvent({eventName:e,eventData:t}),e===a.A.events.HOVER_SET&&(this.currentHoverChangeEvent.currentHoverIdx=t,h.A.dispatchEvent(this.currentHoverChangeEvent)),e===a.A.events.CURRENT_ITEM_CHANGED&&(this.setCurrentSlideshowViewIdx(t.idx),this.getIsScrollLessGallery(this.state.options)&&this.simulateHorizontalScrollToItem(this.galleryStructure.items[t.idx])),!this.state.firstUserInteractionExecuted)switch(e){case a.A.events.HOVER_SET:case a.A.events.LOAD_MORE_CLICKED:case a.A.events.ITEM_ACTION_TRIGGERED:this.setState({firstUserInteractionExecuted:!0})}if("function"==typeof this.props.eventsListener)switch(e){case a.A.events.ITEM_ACTION_TRIGGERED:case a.A.events.ITEM_CLICKED:setTimeout(this.props.eventsListener(e,t,i),0);break;default:this.props.eventsListener(e,t,i)}if(e===a.A.events.GALLERY_SCROLLED){this.mediaScrollHelper.onScroll(t);const e=Object.assign(Object.assign({},this.state.scrollPosition),t);this.setState({scrollPosition:e})}}getMoreItemsIfNeeded(e){var t;if(null===(t=this.deferredGettingMoreItems)||void 0===t?void 0:t.isPending);else if(this.deferredGettingMoreItems=new Me,this.galleryStructure&&this.galleryStructure.galleryItems&&this.galleryStructure.galleryItems.length>0&&this.state.items&&this.state.options&&this.state.container){const t=this.state.options[c.A.layoutParams.structure.scrollDirection],i=this.galleryStructure[t===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?"width":"height"]+(t===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?0:this.state.container.scrollBase),o=h.A[t===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?"innerWidth":"innerHeight"];i<(e?3*o:0)+(e+o)?(this.eventsListener(a.A.events.NEED_MORE_ITEMS,this.state.items.length),setTimeout((()=>{this.deferredGettingMoreItems.resolve()}),2e3)):this.deferredGettingMoreItems.reject()}else this.deferredGettingMoreItems.reject();return this.deferredGettingMoreItems.promise.catch((()=>{}))}canRender(){const e=this.props.container&&this.props.options&&this.state.items;return!e&&n.A.isVerbose()&&console.log("PROGALLERY [CAN_RENDER] GalleryContainer",e,this.props.container,this.props.options,this.state.items),e}onMouseEnter(){var e;(null===(e=this.currentScrollData)||void 0===e?void 0:e.isContinuousScrolling)&&this.state.options[c.A.behaviourParams.gallery.horizontal.autoSlide.pauseOnHover]&&He(this.currentScrollData),this.setState({isInHover:!0})}onMouseLeave(){this.setState({isInHover:!1})}render(){var e,t,i;if(!this.canRender())return null;const o=this.props.options[c.A.layoutParams.structure.scrollDirection]===a.A[c.A.layoutParams.structure.scrollDirection].HORIZONTAL?Re:X;n.A.isVerbose()&&(console.count("PROGALLERY [COUNTS] - GalleryContainer (render)"),console.log("PROGALLERY [RENDER] - GalleryContainer",this.props.container.scrollBase,{props:this.props,items:this.state.items}));const r="none"===this.containerInfiniteGrowthDirection();return s().createElement("div",{"data-key":"pro-gallery-inner-container",key:"pro-gallery-inner-container",className:this.props.isPrerenderMode?"pro-gallery-prerender":"",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:e=>this.galleryContainerRef=e,tabIndex:-1},s().createElement(De,{id:this.props.id,galleryScrollDirection:this.props.options[c.A.layoutParams.structure.scrollDirection],isRTL:this.props.options[c.A.behaviourParams.gallery.layoutDirection]===a.A[c.A.behaviourParams.gallery.layoutDirection].RIGHT_TO_LEFT,totalWidth:this.galleryStructure.width,scrollBase:this.props.container.scrollBase,scrollingElement:this._scrollingElement,getMoreItemsIfNeeded:this.getMoreItemsIfNeeded,setGotFirstScrollIfNeeded:this.setGotFirstScrollIfNeeded,onScroll:this.onGalleryScroll}),s().createElement(o,Object.assign({isInDisplay:this.props.isInDisplay,isInViewport:this.state.isInViewport,isPrerenderMode:this.props.isPrerenderMode,scrollingElement:this._scrollingElement,totalItemsCount:this.props.totalItemsCount,renderedItemsCount:this.props.renderedItemsCount,getMoreItemsIfNeeded:this.getMoreItemsIfNeeded,gotFirstScrollEvent:this.state.gotFirstScrollEvent,setGotFirstScrollIfNeeded:this.setGotFirstScrollIfNeeded,items:this.state.items,getVisibleItems:this.getVisibleItems,galleryStructure:this.galleryStructure,options:this.props.options,container:this.props.container,settings:this.props.settings,displayShowMore:r,id:this.props.id,activeIndex:this.props.activeIndex||0,customComponents:this.props.customComponents,playingVideoIdx:this.state.playingVideoIdx,playing3DIdx:this.state.playing3DIdx,noFollowForSEO:this.props.noFollowForSEO,proGalleryRegionLabel:this.props.proGalleryRegionLabel,proGalleryRole:this.props.proGalleryRole,firstUserInteractionExecuted:this.state.firstUserInteractionExecuted,isGalleryInHover:this.state.isInHover,enableExperimentalFeatures:this.props.enableExperimentalFeatures,galleryContainerRef:this.galleryContainerRef,outOfViewComponent:this.outOfViewComponent,virtualizationSettings:this.props.virtualizationSettings,galleryContainerId:`pro-gallery-container-${this.props.id}`,scrollTop:null===(t=null===(e=this.state)||void 0===e?void 0:e.scrollPosition)||void 0===t?void 0:t.top,isScrollLessGallery:this.getIsScrollLessGallery(this.state.options),actions:Object.assign(Object.assign({},this.props.actions),{findNeighborItem:this.findNeighborItem,toggleLoadMoreItems:this.toggleLoadMoreItems,eventsListener:this.eventsListener,setWixHeight:()=>{},scrollToItem:this.scrollToItem,scrollToGroup:this.scrollToGroup})},this.props.gallery)),s().createElement("div",{"data-key":"items-styles",key:"items-styles",style:{display:"none"}},(this.layoutCss||[]).filter(Boolean).map(((e,t)=>s().createElement("style",{id:`layoutCss-${t}`,key:`layoutCss-${t}`,dangerouslySetInnerHTML:{__html:e}}))),(this.scrollCss||[]).filter(Boolean).map(((e,t)=>s().createElement("style",{id:`scrollCss_${t}`,key:`scrollCss_${t}`,dangerouslySetInnerHTML:{__html:e}}))),!!this.dynamicStyles&&s().createElement("style",{dangerouslySetInnerHTML:{__html:this.dynamicStyles}})),"application"===this.props.proGalleryRole&&s().createElement("span",{ref:e=>this.outOfViewComponent=e,tabIndex:-1,className:"sr-only out-of-view-component"},null===(i=this.props.translations)||void 0===i?void 0:i.Accessibility_Left_Gallery))}}const Be=ze;var We=i(309);class je extends s().Component{constructor(){super(),n.A.isLocal()&&!n.A.isTest()&&console.log("PRO GALLERY DEV")}renderProps(){var e;return Object.assign(Object.assign({},this.props),{id:this.props.id,items:this.props.items||[],settings:this.props.settings||{},offsetTop:this.props.offsetTop,proGalleryRegionLabel:this.props.proGalleryRegionLabel,isInDisplay:null===(e=this.props.isInDisplay)||void 0===e||e})}containerProps(){return{id:`pro-gallery-${this.props.id}`,className:"pro-gallery"}}render(){return s().createElement(We.A,Object.assign({},this.props),s().createElement("div",Object.assign({},this.containerProps()),s().createElement(Be,Object.assign({},this.renderProps()))))}}function Fe(e,t){return!0!==t&&(!0===e.shouldValidateTypes||"true"===(function(){try{const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries())}catch(e){return console.log("cannot use the URLSearchParams",e),{}}}()||""))}class Ve extends s().Component{constructor(e){super(e),this.isUsingCustomInfoElements=this.isUsingCustomInfoElements.bind(this),this.blueprintsManager=new l.A({id:"layoutingGallery"}),this.blueprintsManager.init({deviceType:e.deviceType,api:{isUsingCustomInfoElements:this.isUsingCustomInfoElements,fetchMoreItems:t=>{"function"==typeof e.eventsListener&&e.eventsListener(a.A.events.NEED_MORE_ITEMS,t)},onBlueprintReady:({blueprint:e,blueprintChanged:t,initialBlueprint:i})=>{t?this.setBlueprint(e,i):n.A.isVerbose()&&console.count(">>> Blueprint not changed, not setting it")}}}),this.onNewProps(e,!0),this.state={blueprint:this.blueprintsManager.createInitialBlueprint(e)||null}}setBlueprint(e,t){t||this.setState({blueprint:e})}isUsingCustomInfoElements(){return!!this.galleryProps.customComponents.customHoverRenderer||!!this.galleryProps.customComponents.customInfoRenderer}onNewProps(e,t){const{eventsListener:i}=e,r=(0,o.__rest)(e,["eventsListener"]);this.galleryProps=Object.assign(Object.assign({},r),{eventsListener:(e,t,o)=>{e===a.A.events.NEED_MORE_ITEMS?this.blueprintsManager.getMoreItems(t):"function"==typeof i&&i(e,t,o)},id:e.id||"default-dom-id",customComponents:e.customComponents||{}}),t||this.blueprintsManager.createBlueprint(this.galleryProps).catch((e=>{console.error("Could not create a blueprint from the new props",e)}))}UNSAFE_componentWillReceiveProps(e){this.onNewProps(e,!1)}render(){const{blueprint:e,typeErrors:t}=this.state;return t||(e&&Object.keys(e).length>0?s().createElement(je,Object.assign({},this.galleryProps,e)):null)}async componentDidMount(){if(!1===Fe(this.props,n.A.isSSR()))return;const e=await i.e(8638).then(i.bind(i,82100)),{validate:t,typeErrorsUI:o}=e,r=t(this.state.blueprint.options);r.length>0&&this.setState({typeErrors:o(r)})}}const Ue=($e=Ve,class extends s().Component{constructor(e){super(e),this.initViewModeWrapper(e)}initViewModeWrapper(e){void 0!==e.viewMode&&u.CB.setViewMode(e.viewMode),void 0!==e.deviceType&&u.CB._deviceType!==e.deviceType&&(n.A.dumpCache(),u.CB.setDeviceType(e.deviceType))}updateViewModeWrapper(e){this.props.viewMode!==e.viewMode&&(n.A.dumpCache(),u.CB.setViewMode(e.viewMode)),this.props.deviceType!==e.deviceType&&(n.A.dumpCache(),u.CB.setDeviceType(e.deviceType))}UNSAFE_componentWillReceiveProps(e){this.updateViewModeWrapper(e)}render(){return s().createElement($e,Object.assign({},this.props))}});var $e},42383:(e,t,i)=>{i.d(t,{QH:()=>p,N9:()=>c,vk:()=>g});var o=i(60751),r=i.n(o);function s(e){return new Proxy({},{get:(t,i)=>e(i)})}class a{constructor(){this.listeners={}}on(e,t){return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t),{remove:()=>{this.off(e,t)}}}emit(e,...t){const i=this.listeners[e];i&&i.forEach((e=>e(...t)))}off(e,t){const i=this.listeners[e];i&&i.splice(i.indexOf(t),1)}get call(){return s((e=>(...t)=>{this.emit(e,...t)}))}get listen(){return s((e=>t=>(this.on(e,t),()=>{this.off(e,t)})))}}var n=i(11505);const l=e=>document.getElementById(`pro-gallery-container-${e}`),h=r().createContext(void 0),c=({children:e,id:t})=>{const[i,s]=r().useState();return(0,o.useEffect)((()=>{const e=function(e){const t=new a;let i={mouseIn:!1,position:[0,0]};t.listen.mouseEnterState(((e,...t)=>{i={mouseIn:e,position:t}})),t.listen.mouseMove(((e,t)=>{i=Object.assign(Object.assign({},i),{position:[e,t]})}));const o=t=>{const i=e.getBoundingClientRect();return[t.clientX-i.left,t.clientY-i.top]};function r(i){const r=o(i);t.call.mouseEnterState(!m(e,i,...r),...r)}function s(i){const r=o(i);t.call.mouseEnterState(!m(e,i,...r),...r),t.call.mouseMove(...r)}function n(){t.call.mouseEnterState(!1,0,0)}function l(e){t.call.mouseClickInteractionEvent(e)}return e.addEventListener("mouseenter",r),e.addEventListener("mousemove",s),e.addEventListener("mouseleave",n),e.addEventListener("click",l),e.addEventListener("mousedown",l),e.addEventListener("mouseup",l),{listen:t.listen,get state(){return i},destroy:()=>{e.removeEventListener("mouseenter",r),e.removeEventListener("mousemove",s),e.removeEventListener("mouseleave",n),e.removeEventListener("click",l),e.removeEventListener("mousedown",l),e.removeEventListener("mouseup",l)}}}(l(t));return s(e),()=>{e.destroy()}}),[t]),r().createElement(h.Provider,{value:i},i&&e)};class u extends r().Component{constructor(){var e,t;super(...arguments),this.state={position:(null===(e=this.context)||void 0===e?void 0:e.state.position)||[0,0],mouseIn:(null===(t=this.context)||void 0===t?void 0:t.state.mouseIn)||!1}}componentDidMount(){if(!this.context)throw new Error("MouseFollowerContext is undefined");const e=this.context.listen.mouseMove(n.A.throttle((()=>{this.setState({position:this.context.state.position})}),this.props.throttle)),t=this.context.listen.mouseEnterState((()=>{const{mouseIn:e,position:t}=this.context.state;this.state.mouseIn!==e&&(this.setState({mouseIn:e,position:t}),this.props.onEnterState&&this.props.onEnterState(e))})),i=this.context.listen.mouseClickInteractionEvent((e=>{if(!this.state.mouseIn)return;const[t,i]=this.state.position;this.props.shouldRenderAtPosition(t,i)&&("mousedown"!==e.type&&"mouseup"!==e.type?this.props.onClick(e):this.props.onMouseDownOrUp(e))}));this.cleanup=()=>{e(),t(),i()}}componentWillUnmount(){var e;null===(e=this.cleanup)||void 0===e||e.call(this)}render(){if(!this.state.mouseIn)return null;const[e,t]=this.state.position;return this.props.shouldRenderAtPosition(e,t)?this.props.render(this.state.position[0],this.state.position[1]):null}}u.contextType=h;const d="pg-clickable",m=(e,t,i,o)=>{for(const e of t.composedPath())if(e instanceof HTMLElement&&"true"===e.getAttribute(d))return!0;const r=e.getBoundingClientRect(),s=document.elementFromPoint(i+r.left,o+r.top);if(!s)return!1;let a=s;for(;a;){if("true"===a.getAttribute(d))return!0;a=a.parentElement}return!1};class p extends r().Component{constructor(){super(...arguments),this.shouldRender=e=>{const t=l(this.props.id).offsetWidth,i=t*(Math.min(this.props.mouseCursorContainerMaxWidth,this.props.isTheOnlyArrow?100:50)/100),o=i>=e,r=e>t-i;return"left"===this.props.direction?o:r},this.onNavigation=e=>{e.preventDefault(),e.stopPropagation(),this.props.onNavigate()}}render(){return r().createElement(u,{getElement:()=>l(this.props.id),render:(e,t)=>{var i;return r().createElement(r().Fragment,null,this.props.children(e,t),r().createElement("style",null,`\n                  #${null===(i=l(this.props.id))||void 0===i?void 0:i.id} * {\n                    cursor: none !important;\n                  }\n              `))},shouldRenderAtPosition:this.shouldRender,onClick:this.onNavigation,onMouseDownOrUp:e=>e.stopPropagation(),throttle:50})}}const g=function(){const e=new Map;return s((t=>(e.get(t)||e.set(t,(e=>r().createElement(t,Object.assign(Object.assign({},e),{[d]:"true"})))),e.get(t))))}()},4440:(e,t,i)=>{i.d(t,{Xe:()=>u,g4:()=>d,tF:()=>h});var o=i(99728),r=i(11505),s=i(56379),a=i(33170),n=i(37891);function l(){return((0,o.PP)()||(0,o.Xf)())&&!r.A.isMobile()&&s.A.document}function h({itemContainer:e,enableExperimentalFeatures:t,itemAnchor:i}){if(l()&&t){s.A.document.activeElement===i&&e.focus()}}function c(e,t){const i=s.A.document.activeElement;return String(i.className).includes(e)&&!!s.A.document.querySelector(`#pro-gallery-${t} #${String(i.id)}`)}function u({prevProps:e,currentProps:t,itemContainer:i}){try{if(l()&&s.A.document.activeElement.className){const o=c("gallery-item-container",t.galleryId),r=c("show-more",t.galleryId);(o||r)&&(t.thumbnailHighlightId!==e.thumbnailHighlightId&&t.thumbnailHighlightId===t.id||t.activeIndex!==e.activeIndex&&t.activeIndex===t.idx)&&i.focus()}}catch(e){console.error("Could not set focus to active element",e)}}function d(e){return e[a.A.behaviourParams.item.video.enablePlaceholder]&&(!r.A.isSingleItemHorizontalDisplay(e)||e[a.A.behaviourParams.item.video.playTrigger]!==n.A[a.A.behaviourParams.item.video.playTrigger].AUTO)}},88804:(e,t,i)=>{i.d(t,{v:()=>n});var o=i(60751),r=i.n(o),s=i(309);const a={videoPlayButton:r().lazy((()=>Promise.all([i.e(7891),i.e(5622),i.e(1505),i.e(6748),i.e(9503),i.e(6492)]).then(i.bind(i,38163)))),rotateArrow:r().lazy((()=>Promise.all([i.e(7891),i.e(5622),i.e(1505),i.e(6748),i.e(9503),i.e(9658)]).then(i.bind(i,35222))))},n=({type:e,size:t})=>{let i;const o=(0,s.h)();return"function"==typeof(null==o?void 0:o[e])?o[e](t):a[e]?(i=a[e],r().createElement(r().Suspense,{fallback:r().createElement(r().Fragment,null)},r().createElement(i,{size:t}))):r().createElement(r().Fragment,null)}},309:(e,t,i)=>{i.d(t,{A:()=>n,h:()=>l});var o=i(34629),r=i(60751),s=i.n(r);const a=s().createContext({}),n=e=>{var{children:t}=e;const i=(0,o.__rest)(e,["children"]).customComponents.EXPERIMENTAL_customGalleryUI;return s().createElement(a.Provider,{value:{galleryUI:i}},t)},l=()=>{const{galleryUI:e}=s().useContext(a);return e}}}]);
//# sourceMappingURL=4835.chunk.min.js.map